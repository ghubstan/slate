
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the Bisq gRPC API"
        >
    <title>Bisq gRPC API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-9bdf0b84.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
    <link href="images/favicon-07066d63.ico" rel="icon" type="image/ico" />
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;java&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-58508c44.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">CLI</a>
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="python">Python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#running-example-code" class="toc-h1 toc-link" data-title="Running Example Code">Running Example Code</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#cli-examples" class="toc-h2 toc-link" data-title="CLI Examples">CLI Examples</a>
                  </li>
                  <li>
                    <a href="#java-examples" class="toc-h2 toc-link" data-title="Java Examples">Java Examples</a>
                  </li>
                  <li>
                    <a href="#python-examples" class="toc-h2 toc-link" data-title="Python Examples">Python Examples</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#service-disputeagents" class="toc-h1 toc-link" data-title="Service DisputeAgents">Service DisputeAgents</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rpc-method-registerdisputeagent" class="toc-h2 toc-link" data-title="RPC Method RegisterDisputeAgent">RPC Method RegisterDisputeAgent</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#service-getversion" class="toc-h1 toc-link" data-title="Service GetVersion">Service GetVersion</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rpc-method-getversion" class="toc-h2 toc-link" data-title="RPC Method GetVersion">RPC Method GetVersion</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#service-help" class="toc-h1 toc-link" data-title="Service Help">Service Help</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rpc-method-getmethodhelp" class="toc-h2 toc-link" data-title="RPC Method GetMethodHelp">RPC Method GetMethodHelp</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#service-offers" class="toc-h1 toc-link" data-title="Service Offers">Service Offers</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rpc-method-canceloffer" class="toc-h2 toc-link" data-title="RPC Method CancelOffer">RPC Method CancelOffer</a>
                  </li>
                  <li>
                    <a href="#rpc-method-createbsqswapoffer" class="toc-h2 toc-link" data-title="RPC Method CreateBsqSwapOffer">RPC Method CreateBsqSwapOffer</a>
                  </li>
                  <li>
                    <a href="#rpc-method-createoffer" class="toc-h2 toc-link" data-title="RPC Method CreateOffer">RPC Method CreateOffer</a>
                  </li>
                  <li>
                    <a href="#rpc-method-editoffer" class="toc-h2 toc-link" data-title="RPC Method EditOffer">RPC Method EditOffer</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getbsqswapoffer" class="toc-h2 toc-link" data-title="RPC Method GetBsqSwapOffer">RPC Method GetBsqSwapOffer</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getbsqswapoffers" class="toc-h2 toc-link" data-title="RPC Method GetBsqSwapOffers">RPC Method GetBsqSwapOffers</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getmybsqswapoffer" class="toc-h2 toc-link" data-title="RPC Method GetMyBsqSwapOffer">RPC Method GetMyBsqSwapOffer</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getmybsqswapoffers" class="toc-h2 toc-link" data-title="RPC Method GetMyBsqSwapOffers">RPC Method GetMyBsqSwapOffers</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getmyoffer" class="toc-h2 toc-link" data-title="RPC Method GetMyOffer">RPC Method GetMyOffer</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getmyoffers" class="toc-h2 toc-link" data-title="RPC Method GetMyOffers">RPC Method GetMyOffers</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getoffer" class="toc-h2 toc-link" data-title="RPC Method GetOffer">RPC Method GetOffer</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getoffercategory" class="toc-h2 toc-link" data-title="RPC Method GetOfferCategory">RPC Method GetOfferCategory</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getoffers" class="toc-h2 toc-link" data-title="RPC Method GetOffers">RPC Method GetOffers</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#service-paymentaccounts" class="toc-h1 toc-link" data-title="Service PaymentAccounts">Service PaymentAccounts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rpc-method-createcryptocurrencypaymentaccount" class="toc-h2 toc-link" data-title="RPC Method CreateCryptoCurrencyPaymentAccount">RPC Method CreateCryptoCurrencyPaymentAccount</a>
                  </li>
                  <li>
                    <a href="#rpc-method-createpaymentaccount" class="toc-h2 toc-link" data-title="RPC Method CreatePaymentAccount">RPC Method CreatePaymentAccount</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getcryptocurrencypaymentmethods" class="toc-h2 toc-link" data-title="RPC Method GetCryptoCurrencyPaymentMethods">RPC Method GetCryptoCurrencyPaymentMethods</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getpaymentaccountform" class="toc-h2 toc-link" data-title="RPC Method GetPaymentAccountForm">RPC Method GetPaymentAccountForm</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getpaymentaccounts" class="toc-h2 toc-link" data-title="RPC Method GetPaymentAccounts">RPC Method GetPaymentAccounts</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getpaymentmethods" class="toc-h2 toc-link" data-title="RPC Method GetPaymentMethods">RPC Method GetPaymentMethods</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#service-price" class="toc-h1 toc-link" data-title="Service Price">Service Price</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rpc-method-getmarketprice" class="toc-h2 toc-link" data-title="RPC Method GetMarketPrice">RPC Method GetMarketPrice</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#service-shutdownserver" class="toc-h1 toc-link" data-title="Service ShutdownServer">Service ShutdownServer</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rpc-method-stop" class="toc-h2 toc-link" data-title="RPC Method Stop">RPC Method Stop</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#service-trades" class="toc-h1 toc-link" data-title="Service Trades">Service Trades</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rpc-method-closetrade" class="toc-h2 toc-link" data-title="RPC Method CloseTrade">RPC Method CloseTrade</a>
                  </li>
                  <li>
                    <a href="#rpc-method-confirmpaymentreceived" class="toc-h2 toc-link" data-title="RPC Method ConfirmPaymentReceived">RPC Method ConfirmPaymentReceived</a>
                  </li>
                  <li>
                    <a href="#rpc-method-confirmpaymentstarted" class="toc-h2 toc-link" data-title="RPC Method ConfirmPaymentStarted">RPC Method ConfirmPaymentStarted</a>
                  </li>
                  <li>
                    <a href="#rpc-method-failtrade" class="toc-h2 toc-link" data-title="RPC Method FailTrade">RPC Method FailTrade</a>
                  </li>
                  <li>
                    <a href="#rpc-method-gettrade" class="toc-h2 toc-link" data-title="RPC Method GetTrade">RPC Method GetTrade</a>
                  </li>
                  <li>
                    <a href="#rpc-method-gettrades" class="toc-h2 toc-link" data-title="RPC Method GetTrades">RPC Method GetTrades</a>
                  </li>
                  <li>
                    <a href="#rpc-method-takeoffer" class="toc-h2 toc-link" data-title="RPC Method TakeOffer">RPC Method TakeOffer</a>
                  </li>
                  <li>
                    <a href="#rpc-method-unfailtrade" class="toc-h2 toc-link" data-title="RPC Method UnFailTrade">RPC Method UnFailTrade</a>
                  </li>
                  <li>
                    <a href="#rpc-method-withdrawfunds" class="toc-h2 toc-link" data-title="RPC Method WithdrawFunds">RPC Method WithdrawFunds</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#service-wallets" class="toc-h1 toc-link" data-title="Service Wallets">Service Wallets</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rpc-method-getaddressbalance" class="toc-h2 toc-link" data-title="RPC Method GetAddressBalance">RPC Method GetAddressBalance</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getbalances" class="toc-h2 toc-link" data-title="RPC Method GetBalances">RPC Method GetBalances</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getfundingaddresses" class="toc-h2 toc-link" data-title="RPC Method GetFundingAddresses">RPC Method GetFundingAddresses</a>
                  </li>
                  <li>
                    <a href="#rpc-method-gettransaction" class="toc-h2 toc-link" data-title="RPC Method GetTransaction">RPC Method GetTransaction</a>
                  </li>
                  <li>
                    <a href="#rpc-method-gettxfeerate" class="toc-h2 toc-link" data-title="RPC Method GetTxFeeRate">RPC Method GetTxFeeRate</a>
                  </li>
                  <li>
                    <a href="#rpc-method-getunusedbsqaddress" class="toc-h2 toc-link" data-title="RPC Method GetUnusedBsqAddress">RPC Method GetUnusedBsqAddress</a>
                  </li>
                  <li>
                    <a href="#rpc-method-lockwallet" class="toc-h2 toc-link" data-title="RPC Method LockWallet">RPC Method LockWallet</a>
                  </li>
                  <li>
                    <a href="#rpc-method-removewalletpassword" class="toc-h2 toc-link" data-title="RPC Method RemoveWalletPassword">RPC Method RemoveWalletPassword</a>
                  </li>
                  <li>
                    <a href="#rpc-method-sendbsq" class="toc-h2 toc-link" data-title="RPC Method SendBsq">RPC Method SendBsq</a>
                  </li>
                  <li>
                    <a href="#rpc-method-sendbtc" class="toc-h2 toc-link" data-title="RPC Method SendBtc">RPC Method SendBtc</a>
                  </li>
                  <li>
                    <a href="#rpc-method-settxfeeratepreference" class="toc-h2 toc-link" data-title="RPC Method SetTxFeeRatePreference">RPC Method SetTxFeeRatePreference</a>
                  </li>
                  <li>
                    <a href="#rpc-method-setwalletpassword" class="toc-h2 toc-link" data-title="RPC Method SetWalletPassword">RPC Method SetWalletPassword</a>
                  </li>
                  <li>
                    <a href="#rpc-method-unlockwallet" class="toc-h2 toc-link" data-title="RPC Method UnlockWallet">RPC Method UnlockWallet</a>
                  </li>
                  <li>
                    <a href="#rpc-method-unsettxfeeratepreference" class="toc-h2 toc-link" data-title="RPC Method UnsetTxFeeRatePreference">RPC Method UnsetTxFeeRatePreference</a>
                  </li>
                  <li>
                    <a href="#rpc-method-verifybsqsenttoaddress" class="toc-h2 toc-link" data-title="RPC Method VerifyBsqSentToAddress">RPC Method VerifyBsqSentToAddress</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#grpc-messages" class="toc-h1 toc-link" data-title="gRPC Messages">gRPC Messages</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#achtransferaccountpayload" class="toc-h2 toc-link" data-title="AchTransferAccountPayload">AchTransferAccountPayload</a>
                  </li>
                  <li>
                    <a href="#addressbalanceinfo" class="toc-h2 toc-link" data-title="AddressBalanceInfo">AddressBalanceInfo</a>
                  </li>
                  <li>
                    <a href="#advancedcashaccountpayload" class="toc-h2 toc-link" data-title="AdvancedCashAccountPayload">AdvancedCashAccountPayload</a>
                  </li>
                  <li>
                    <a href="#alipayaccountpayload" class="toc-h2 toc-link" data-title="AliPayAccountPayload">AliPayAccountPayload</a>
                  </li>
                  <li>
                    <a href="#amazongiftcardaccountpayload" class="toc-h2 toc-link" data-title="AmazonGiftCardAccountPayload">AmazonGiftCardAccountPayload</a>
                  </li>
                  <li>
                    <a href="#australiapayidpayload" class="toc-h2 toc-link" data-title="AustraliaPayidPayload">AustraliaPayidPayload</a>
                  </li>
                  <li>
                    <a href="#availabilityresultwithdescription" class="toc-h2 toc-link" data-title="AvailabilityResultWithDescription">AvailabilityResultWithDescription</a>
                  </li>
                  <li>
                    <a href="#balancesinfo" class="toc-h2 toc-link" data-title="BalancesInfo">BalancesInfo</a>
                  </li>
                  <li>
                    <a href="#bankaccountpayload" class="toc-h2 toc-link" data-title="BankAccountPayload">BankAccountPayload</a>
                  </li>
                  <li>
                    <a href="#bizumaccountpayload" class="toc-h2 toc-link" data-title="BizumAccountPayload">BizumAccountPayload</a>
                  </li>
                  <li>
                    <a href="#bsqbalanceinfo" class="toc-h2 toc-link" data-title="BsqBalanceInfo">BsqBalanceInfo</a>
                  </li>
                  <li>
                    <a href="#bsqswapaccountpayload" class="toc-h2 toc-link" data-title="BsqSwapAccountPayload">BsqSwapAccountPayload</a>
                  </li>
                  <li>
                    <a href="#bsqswaptradeinfo" class="toc-h2 toc-link" data-title="BsqSwapTradeInfo">BsqSwapTradeInfo</a>
                  </li>
                  <li>
                    <a href="#btcbalanceinfo" class="toc-h2 toc-link" data-title="BtcBalanceInfo">BtcBalanceInfo</a>
                  </li>
                  <li>
                    <a href="#capitualaccountpayload" class="toc-h2 toc-link" data-title="CapitualAccountPayload">CapitualAccountPayload</a>
                  </li>
                  <li>
                    <a href="#cashappaccountpayload" class="toc-h2 toc-link" data-title="CashAppAccountPayload">CashAppAccountPayload</a>
                  </li>
                  <li>
                    <a href="#cashbymailaccountpayload" class="toc-h2 toc-link" data-title="CashByMailAccountPayload">CashByMailAccountPayload</a>
                  </li>
                  <li>
                    <a href="#cashdepositaccountpayload" class="toc-h2 toc-link" data-title="CashDepositAccountPayload">CashDepositAccountPayload</a>
                  </li>
                  <li>
                    <a href="#celpayaccountpayload" class="toc-h2 toc-link" data-title="CelPayAccountPayload">CelPayAccountPayload</a>
                  </li>
                  <li>
                    <a href="#chasequickpayaccountpayload" class="toc-h2 toc-link" data-title="ChaseQuickPayAccountPayload">ChaseQuickPayAccountPayload</a>
                  </li>
                  <li>
                    <a href="#clearxchangeaccountpayload" class="toc-h2 toc-link" data-title="ClearXchangeAccountPayload">ClearXchangeAccountPayload</a>
                  </li>
                  <li>
                    <a href="#contractinfo" class="toc-h2 toc-link" data-title="ContractInfo">ContractInfo</a>
                  </li>
                  <li>
                    <a href="#countrybasedpaymentaccountpayload" class="toc-h2 toc-link" data-title="CountryBasedPaymentAccountPayload">CountryBasedPaymentAccountPayload</a>
                  </li>
                  <li>
                    <a href="#cryptocurrency" class="toc-h2 toc-link" data-title="CryptoCurrency">CryptoCurrency</a>
                  </li>
                  <li>
                    <a href="#cryptocurrencyaccountpayload" class="toc-h2 toc-link" data-title="CryptoCurrencyAccountPayload">CryptoCurrencyAccountPayload</a>
                  </li>
                  <li>
                    <a href="#currency" class="toc-h2 toc-link" data-title="Currency">Currency</a>
                  </li>
                  <li>
                    <a href="#domesticwiretransferaccountpayload" class="toc-h2 toc-link" data-title="DomesticWireTransferAccountPayload">DomesticWireTransferAccountPayload</a>
                  </li>
                  <li>
                    <a href="#f2faccountpayload" class="toc-h2 toc-link" data-title="F2FAccountPayload">F2FAccountPayload</a>
                  </li>
                  <li>
                    <a href="#fasterpaymentsaccountpayload" class="toc-h2 toc-link" data-title="FasterPaymentsAccountPayload">FasterPaymentsAccountPayload</a>
                  </li>
                  <li>
                    <a href="#fiatcurrency" class="toc-h2 toc-link" data-title="FiatCurrency">FiatCurrency</a>
                  </li>
                  <li>
                    <a href="#halcashaccountpayload" class="toc-h2 toc-link" data-title="HalCashAccountPayload">HalCashAccountPayload</a>
                  </li>
                  <li>
                    <a href="#ifscbasedaccountpayload" class="toc-h2 toc-link" data-title="IfscBasedAccountPayload">IfscBasedAccountPayload</a>
                  </li>
                  <li>
                    <a href="#impsaccountpayload" class="toc-h2 toc-link" data-title="ImpsAccountPayload">ImpsAccountPayload</a>
                  </li>
                  <li>
                    <a href="#instantcryptocurrencyaccountpayload" class="toc-h2 toc-link" data-title="InstantCryptoCurrencyAccountPayload">InstantCryptoCurrencyAccountPayload</a>
                  </li>
                  <li>
                    <a href="#interacetransferaccountpayload" class="toc-h2 toc-link" data-title="InteracETransferAccountPayload">InteracETransferAccountPayload</a>
                  </li>
                  <li>
                    <a href="#japanbankaccountpayload" class="toc-h2 toc-link" data-title="JapanBankAccountPayload">JapanBankAccountPayload</a>
                  </li>
                  <li>
                    <a href="#moneseaccountpayload" class="toc-h2 toc-link" data-title="MoneseAccountPayload">MoneseAccountPayload</a>
                  </li>
                  <li>
                    <a href="#moneybeamaccountpayload" class="toc-h2 toc-link" data-title="MoneyBeamAccountPayload">MoneyBeamAccountPayload</a>
                  </li>
                  <li>
                    <a href="#moneygramaccountpayload" class="toc-h2 toc-link" data-title="MoneyGramAccountPayload">MoneyGramAccountPayload</a>
                  </li>
                  <li>
                    <a href="#nationalbankaccountpayload" class="toc-h2 toc-link" data-title="NationalBankAccountPayload">NationalBankAccountPayload</a>
                  </li>
                  <li>
                    <a href="#neftaccountpayload" class="toc-h2 toc-link" data-title="NeftAccountPayload">NeftAccountPayload</a>
                  </li>
                  <li>
                    <a href="#nequiaccountpayload" class="toc-h2 toc-link" data-title="NequiAccountPayload">NequiAccountPayload</a>
                  </li>
                  <li>
                    <a href="#okpayaccountpayload" class="toc-h2 toc-link" data-title="OKPayAccountPayload">OKPayAccountPayload</a>
                  </li>
                  <li>
                    <a href="#offerinfo" class="toc-h2 toc-link" data-title="OfferInfo">OfferInfo</a>
                  </li>
                  <li>
                    <a href="#paxumaccountpayload" class="toc-h2 toc-link" data-title="PaxumAccountPayload">PaxumAccountPayload</a>
                  </li>
                  <li>
                    <a href="#paymentaccount" class="toc-h2 toc-link" data-title="PaymentAccount">PaymentAccount</a>
                  </li>
                  <li>
                    <a href="#paymentaccountpayload" class="toc-h2 toc-link" data-title="PaymentAccountPayload">PaymentAccountPayload</a>
                  </li>
                  <li>
                    <a href="#paymentaccountpayloadinfo" class="toc-h2 toc-link" data-title="PaymentAccountPayloadInfo">PaymentAccountPayloadInfo</a>
                  </li>
                  <li>
                    <a href="#paymentmethod" class="toc-h2 toc-link" data-title="PaymentMethod">PaymentMethod</a>
                  </li>
                  <li>
                    <a href="#payseraaccountpayload" class="toc-h2 toc-link" data-title="PayseraAccountPayload">PayseraAccountPayload</a>
                  </li>
                  <li>
                    <a href="#paytmaccountpayload" class="toc-h2 toc-link" data-title="PaytmAccountPayload">PaytmAccountPayload</a>
                  </li>
                  <li>
                    <a href="#perfectmoneyaccountpayload" class="toc-h2 toc-link" data-title="PerfectMoneyAccountPayload">PerfectMoneyAccountPayload</a>
                  </li>
                  <li>
                    <a href="#pixaccountpayload" class="toc-h2 toc-link" data-title="PixAccountPayload">PixAccountPayload</a>
                  </li>
                  <li>
                    <a href="#popmoneyaccountpayload" class="toc-h2 toc-link" data-title="PopmoneyAccountPayload">PopmoneyAccountPayload</a>
                  </li>
                  <li>
                    <a href="#promptpayaccountpayload" class="toc-h2 toc-link" data-title="PromptPayAccountPayload">PromptPayAccountPayload</a>
                  </li>
                  <li>
                    <a href="#revolutaccountpayload" class="toc-h2 toc-link" data-title="RevolutAccountPayload">RevolutAccountPayload</a>
                  </li>
                  <li>
                    <a href="#rtgsaccountpayload" class="toc-h2 toc-link" data-title="RtgsAccountPayload">RtgsAccountPayload</a>
                  </li>
                  <li>
                    <a href="#samebankaccountpayload" class="toc-h2 toc-link" data-title="SameBankAccountPayload">SameBankAccountPayload</a>
                  </li>
                  <li>
                    <a href="#satispayaccountpayload" class="toc-h2 toc-link" data-title="SatispayAccountPayload">SatispayAccountPayload</a>
                  </li>
                  <li>
                    <a href="#sepaaccountpayload" class="toc-h2 toc-link" data-title="SepaAccountPayload">SepaAccountPayload</a>
                  </li>
                  <li>
                    <a href="#sepainstantaccountpayload" class="toc-h2 toc-link" data-title="SepaInstantAccountPayload">SepaInstantAccountPayload</a>
                  </li>
                  <li>
                    <a href="#specificbanksaccountpayload" class="toc-h2 toc-link" data-title="SpecificBanksAccountPayload">SpecificBanksAccountPayload</a>
                  </li>
                  <li>
                    <a href="#strikeaccountpayload" class="toc-h2 toc-link" data-title="StrikeAccountPayload">StrikeAccountPayload</a>
                  </li>
                  <li>
                    <a href="#swiftaccountpayload" class="toc-h2 toc-link" data-title="SwiftAccountPayload">SwiftAccountPayload</a>
                  </li>
                  <li>
                    <a href="#swishaccountpayload" class="toc-h2 toc-link" data-title="SwishAccountPayload">SwishAccountPayload</a>
                  </li>
                  <li>
                    <a href="#tikkieaccountpayload" class="toc-h2 toc-link" data-title="TikkieAccountPayload">TikkieAccountPayload</a>
                  </li>
                  <li>
                    <a href="#tradecurrency" class="toc-h2 toc-link" data-title="TradeCurrency">TradeCurrency</a>
                  </li>
                  <li>
                    <a href="#tradeinfo" class="toc-h2 toc-link" data-title="TradeInfo">TradeInfo</a>
                  </li>
                  <li>
                    <a href="#transferwiseaccountpayload" class="toc-h2 toc-link" data-title="TransferwiseAccountPayload">TransferwiseAccountPayload</a>
                  </li>
                  <li>
                    <a href="#transferwiseusdaccountpayload" class="toc-h2 toc-link" data-title="TransferwiseUsdAccountPayload">TransferwiseUsdAccountPayload</a>
                  </li>
                  <li>
                    <a href="#txfeerateinfo" class="toc-h2 toc-link" data-title="TxFeeRateInfo">TxFeeRateInfo</a>
                  </li>
                  <li>
                    <a href="#txinfo" class="toc-h2 toc-link" data-title="TxInfo">TxInfo</a>
                  </li>
                  <li>
                    <a href="#uspostalmoneyorderaccountpayload" class="toc-h2 toc-link" data-title="USPostalMoneyOrderAccountPayload">USPostalMoneyOrderAccountPayload</a>
                  </li>
                  <li>
                    <a href="#upholdaccountpayload" class="toc-h2 toc-link" data-title="UpholdAccountPayload">UpholdAccountPayload</a>
                  </li>
                  <li>
                    <a href="#upiaccountpayload" class="toc-h2 toc-link" data-title="UpiAccountPayload">UpiAccountPayload</a>
                  </li>
                  <li>
                    <a href="#venmoaccountpayload" class="toc-h2 toc-link" data-title="VenmoAccountPayload">VenmoAccountPayload</a>
                  </li>
                  <li>
                    <a href="#verseaccountpayload" class="toc-h2 toc-link" data-title="VerseAccountPayload">VerseAccountPayload</a>
                  </li>
                  <li>
                    <a href="#wechatpayaccountpayload" class="toc-h2 toc-link" data-title="WeChatPayAccountPayload">WeChatPayAccountPayload</a>
                  </li>
                  <li>
                    <a href="#westernunionaccountpayload" class="toc-h2 toc-link" data-title="WesternUnionAccountPayload">WesternUnionAccountPayload</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#grpc-enums" class="toc-h1 toc-link" data-title="gRPC Enums">gRPC Enums</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#availabilityresult" class="toc-h2 toc-link" data-title="AvailabilityResult">AvailabilityResult</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://bisq.network'>Bisq Site</a></li>
            <li><a href='https://github.com/bisq-network/bisq'>Bisq Source Code</a></li>
            <li>Documentation Powered by <a href='https://github.com/lord/slate'>Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Bisq gRPC API reference documentation for Bisq Daemon.</p>

<p>You can use this API to access local Bisq daemon API endpoints, which provide a subset of the Bisq Desktop application&#39;s
feature set:  check balances, transfer BTC and BSQ, create payment accounts, view offers, create and take offers, and
execute trades.</p>

<p>The Bisq API is based on the gRPC framework, and any supported gRPC language binding can be used to call Bisq API
endpoints. This document provides code examples for language bindings in Java and Python, plus bisq-cli (CLI) command
examples. The code examples are viewable in the dark area to the right, and you can switch between programming language
examples with the tabs on the top right.</p>

<p>The original *.proto files from which the gRPC documentation was generated can be found here:</p>

<ul>
<li><a href="https://github.com/bisq-network/bisq/tree/master/proto/src/main/proto/pb.proto">pb.proto</a></li>
<li><a href="https://github.com/bisq-network/bisq/tree/master/proto/src/main/proto/grpc.proto">grpc.proto</a></li>
</ul>

<p>This API documentation was created with <a href="https://github.com/slatedocs/slate">Slate</a>.</p>
<h1 id='running-example-code'>Running Example Code</h1>
<p>Examples should not be used to make calls to an API daemon connected to the bitcoin mainnet. There is a convenient way
to run a regtest bitcoin-core daemon, a Bisq seed node, an arbitration node, and two regtest API daemons called Alice (
listening on port 9998), and Bob (listening on port 9999). The Bob and Alice daemons will have regtest wallets
containing 10 BTC. Bob&#39;s BSQ wallet will also be set up with 1500000 BSQ, Alice&#39;s with 1000000 BSQ. These two API
daemons can simulate trading over the local regtest network.</p>

<p>See
the <a href="https://github.com/bisq-network/bisq/blob/master/apitest/docs/api-beta-test-guide.md">Bisq API Beta Testing Guide</a>
for instructions on how to get the Bisq API test harness up and running.</p>
<h2 id='cli-examples'>CLI Examples</h2>
<p>The API CLI is included in Bisq; no protobuf code generation tasks are required to run the CLI examples in this
document.</p>

<p>The only requirements are:</p>

<ul>
<li>A running, local API daemon, preferably the test harness described in
the <a href="https://github.com/bisq-network/bisq/blob/master/apitest/docs/api-beta-test-guide.md">Bisq API Beta Testing Guide</a></li>
<li>A terminal open in the Bisq source project&#39;s root directory</li>
</ul>
<h2 id='java-examples'>Java Examples</h2>
<p>Running Java examples requires:</p>

<ul>
<li>A running, local API daemon, preferably the test harness described in
the <a href="https://github.com/bisq-network/bisq/blob/master/apitest/docs/api-beta-test-guide.md">Bisq API Beta Testing Guide</a></li>
<li>Downloading Bisq protobuf definition files</li>
<li>Generating protobuf and gRPC service stubs using the the <a href="https://grpc.io/docs/protoc-installation/">protoc</a> compiler,
with the <a href="https://github.com/grpc/grpc-java">protoc-gen-grpc-java</a> plugin.</li>
</ul>
<h3 id='download-the-bisq-proto-files-to-your-java-project'>Download the Bisq .proto files to your Java project</h3>
<p>If your Java source is located in a directory named  <code>my-api-app/src/main</code>, open a terminal in your project root
directory (<code>my-api-app</code>), and the Bisq .proto files are located in a directory named <code>my-api-app/src/main/proto</code>:</p>

<p><code>$ export PROTO_PATH=&quot;src/main/proto&quot;</code></br>
    <code>$ curl -o $PROTO_PATH/pb.proto https://raw.githubusercontent.com/bisq-network/bisq/master/proto/src/main/proto/pb.proto</code></br>
    <code>$ curl -o $PROTO_PATH/grpc.proto https://raw.githubusercontent.com/bisq-network/bisq/master/proto/src/main/proto/grpc.proto</code></p>
<h3 id='generate-bisq-api-protobuf-stubs-using-gradle-grpc-java-plugin-recommended'>Generate Bisq API protobuf stubs using Gradle grpc-java plugin (recommended)</h3>
<p>You can generate the API stubs in a Gradle project using the <a href="https://github.com/grpc/grpc-java">protoc-gen-grpc-java</a>
plugin. The <a href="https://github.com/ghubstan/bisq-grpc-api-doc/blob/main/build.gradle">build.gradle</a>
file used in the project that builds this document could be modified to suit you.</p>

<p><em>Note: You can also generate stubs with <a href="https://github.com/grpc/grpc-java">protoc-gen-grpc-java</a> in maven projects.</em></p>
<h3 id='generate-bisq-api-protobuf-stubs-using-grpc-java-plugin-from-terminal'>Generate Bisq API protobuf stubs using grpc-java plugin from terminal</h3>
<p>If you prefer to generate the Java protos from a terminal, you can compile
the <a href="https://github.com/grpc/grpc-java/blob/master/COMPILING.md">protoc gen-java</a> binary from source, or manually
download the <a href="https://repo1.maven.org/maven2/io/grpc/protoc-gen-grpc-java/">binary</a> to your system <code>PATH</code>, and
run <code>protoc</code> with the appropriate options:</p>

<p><code>$ protoc --plugin=protoc-gen-grpc-java=$GEN_GRPC_JAVA_BINARY_PATH \</code></br>
        <code>--grpc-java_out=$JAVA_PROTO_OUT_PATH \</code></br>
        <code>--proto_path=$PROTO_PATH \</code></br>
          <code>$PROTO_PATH/*.proto</code></br></p>

<p><em>Note:  My attempts to compile the protoc gen-java plugin on my own platform were unsuccessful. You may have better luck
or time to resolve platform specific build issues.</em></p>
<h2 id='python-examples'>Python Examples</h2>
<p>Running Python examples requires:</p>

<ul>
<li>A running, local API daemon, preferably the test harness described in
the <a href="https://github.com/bisq-network/bisq/blob/master/apitest/docs/api-beta-test-guide.md">Bisq API Beta Testing Guide</a></li>
<li>Downloading Bisq protobuf definition files</li>
<li>Generating protobuf and gRPC service stubs using the <code>protoc</code> compiler, with two additional Python protobuf and grpc
plugins.</li>
</ul>

<p>Instructions for generating the Bisq API Python stubs follow.</p>
<h3 id='install-python-plugins-for-protoc-compiler'>Install python plugins for protoc compiler</h3>
<p><code>$ python -m pip install grpcio grpcio-tools</code></br>
    <code>$ pip3 install mypy-protobuf</code></p>
<h3 id='download-the-bisq-proto-files-to-your-python-project'>Download the Bisq .proto files to your Python project</h3>
<p>If your Python scripts are located in a directory named  <code>my-api-scripts</code>, open a terminal in that directory and
download the Bisq .proto files to a directory named <code>my-api-scripts/proto</code>:</p>

<p><code>$ export PROTO_PATH=&quot;proto&quot;</code></br>
    <code>$ curl -o $PROTO_PATH/pb.proto https://raw.githubusercontent.com/bisq-network/bisq/master/proto/src/main/proto/pb.proto</code></br>
    <code>$ curl -o $PROTO_PATH/grpc.proto https://raw.githubusercontent.com/bisq-network/bisq/master/proto/src/main/proto/grpc.proto</code></p>
<h3 id='generate-bisq-api-grpc-python-stubs'>Generate Bisq API gRPC Python stubs</h3>
<p>The location of Python code generated from downloaded Bisq .proto files <em>must</em> be <code>&lt;python-examples-dir&gt;/bisq/api</code>, or
this document&#39;s example Python scripts will not be able to import them at runtime. Put another way, if your Python
scripts are in a folder named <code>my-api-scripts</code>, the <code>protoc</code> compiler must generate Python stubs
in <code>my-api-scripts/bisq/api</code>. Each step of the setup is explained below.</p>

<p>If</p>

<ul>
<li>Python scripts are located in  <code>my-api-scripts</code></li>
<li>Downloaded Bisq .proto files are located in  <code>my-api-scripts/proto</code></li>
<li>A terminal is opened in directory <code>my-api-scripts</code></li>
</ul>

<p>Generate API Python stubs in <code>my-api-scripts/bisq/api</code>, as follows:</p>

<p><code>$ export PROTO_PATH=&quot;proto&quot;</code></br>
    <code>$ export PYTHON_PROTO_OUT_PATH=&quot;bisq/api&quot;</code></br>
    </br>
    <code>$ python3 -m grpc_tools.protoc \</code></br>
        <code>--proto_path=$PROTO_PATH \</code></br>
        <code>--python_out=$PYTHON_PROTO_OUT_PATH \</code></br>
        <code>--grpc_python_out=$PYTHON_PROTO_OUT_PATH $PROTO_PATH/*.proto</code></br>
    </br>
    <code>$ protoc --proto_path=$PROTO_PATH --python_out=$PYTHON_PROTO_OUT_PATH $PROTO_PATH/*.proto</code></br>
    </br>
    <code># Hack two internal import statements in the generated Python code to prepend the bisq.api package name.</code></br>
    <code># See why @ https://github.com/protocolbuffers/protobuf/issues/1491</code></br>
    </br>
    <code>sed -i &#39;s/import pb_pb2 as pb__pb2/import bisq.api.pb_pb2 as pb__pb2/g&#39; $PYTHON_PROTO_OUT_PATH/grpc_pb2.py</code></br>
    <code>sed -i &#39;s/import grpc_pb2 as grpc__pb2/import bisq.api.grpc_pb2 as grpc__pb2/g&#39; $PYTHON_PROTO_OUT_PATH/grpc_pb2_grpc.py</code></p>

<p>Now you should be able to import the Bisq gRPC API stubs into scripts located in <code>my-api-scripts</code>, using the following
Python import statements:</p>

<p><code>import grpc</code></br>
    <code>import bisq.api.grpc_pb2 as bisq_messages</code></br>
    <code>import bisq.api.grpc_pb2_grpc as bisq_service</code></p>
<h3 id='todo-simplify-these-python-example-setup-sections'><em>TODO Simplify these Python example setup sections...</em></h3>
<p><em>if more experienced Python developers can demonstrate an easier, more flexible way of generating protobuf / grpc stubs
without having to manually hack internal import statements.</em></p>
<h1 id='authentication'>Authentication</h1>
<p>An API password option <code>--apiPassword=&lt;api-password&gt;</code> is passed in the daemon&#39;s start command.</p>

<p>All API client requests must authenticate to the daemon with the api-password.</p>

<ul>
<li><p>Each CLI command must include the <code>--password=&lt;api-password&gt;</code> option.</p></li>
<li><p>API authentication from Java and Python requests are demonstrated in API usage examples.</p>
<h1 id='service-disputeagents'>Service DisputeAgents</h1>
<p>The DisputeAgents service is provided for development only;  it can only be used when running in regtest mode.</p></li>
</ul>
<h2 id='rpc-method-registerdisputeagent'>RPC Method RegisterDisputeAgent</h2><h3 id='unary-rpc'>Unary RPC</h3>
<p>Register regtest / dev mode dispute agents.  Does not work when running on mainnet.</p>
<h3 id='grpc-request-registerdisputeagentrequest'>gRPC Request: RegisterDisputeAgentRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>dispute_agent_type</td>
<td>string</td>
<td>One of &quot;mediator&quot; or &quot;refundagent&quot;.  Development / test arbitrators can only be registered in the UI.</td>
</tr>
<tr>
<td>registration_key</td>
<td>string</td>
<td>Private developer (only) registration key.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-registerdisputeagentreply'>gRPC Response: RegisterDisputeAgentReply</h3>
<p>This Response has no parameters.</p>
<h1 id='service-getversion'>Service GetVersion</h1><h2 id='rpc-method-getversion'>RPC Method GetVersion</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getversion

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetVersionGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetVersionRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetVersion</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">GetVersionGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetVersionRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">reply</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getVersion</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">reply</span><span class="o">.</span><span class="na">getVersion</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">GetVersionStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetVersion</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetVersionRequest</span><span class="p">(),</span>
                                                          <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-2'>Unary RPC</h3>
<p>Get the current Bisq version number.</p>
<h3 id='grpc-request-getversionrequest'>gRPC Request: GetVersionRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-getversionreply'>gRPC Response: GetVersionReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>version</td>
<td>string</td>
<td>The version of the Bisq software release.</td>
</tr>
</tbody></table>
<h1 id='service-help'>Service Help</h1><h2 id='rpc-method-getmethodhelp'>RPC Method GetMethodHelp</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 createoffer <span class="nt">--help</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="c1">// Help Service is for CLI users.</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Help Service is for CLI users.
</span></code></pre></div><h3 id='unary-rpc-3'>Unary RPC</h3>
<p>Returns a CLI command man page.</p>
<h3 id='grpc-request-getmethodhelprequest'>gRPC Request: GetMethodHelpRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>method_name</td>
<td>string</td>
<td>The CLI command name.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getmethodhelpreply'>gRPC Response: GetMethodHelpReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>method_help</td>
<td>string</td>
<td>The man page for the CLI command.</td>
</tr>
</tbody></table>
<h1 id='service-offers'>Service Offers</h1>
<p>The Offers service provides rpc methods for creating, editing, listing, and cancelling Bisq offers.</p>
<h2 id='rpc-method-canceloffer'>RPC Method CancelOffer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 canceloffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.CancelOfferRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CancelOffer</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">CancelOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">cancelOffer</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">CancelOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">CancelOfferRequest</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'NWSWO-1a704b3f-c8c9-4bed-93bf-06aefaba3b12-182'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-4'>Unary RPC</h3>
<p>Cancel an open offer;  remove it from the offer book.</p>
<h3 id='grpc-request-cancelofferrequest'>gRPC Request: CancelOfferRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The canceled offer&#39;s unique identifier.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-cancelofferreply'>gRPC Response: CancelOfferReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-createbsqswapoffer'>RPC Method CreateBsqSwapOffer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 createoffer <span class="se">\</span>
  <span class="nt">--swap</span><span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
  <span class="nt">--direction</span><span class="o">=</span>BUY <span class="se">\</span>
  <span class="nt">--currency-code</span><span class="o">=</span>BSQ <span class="se">\</span>
  <span class="nt">--amount</span><span class="o">=</span>0.50 <span class="se">\</span>
  <span class="nt">--min-amount</span><span class="o">=</span>0.25 <span class="se">\</span>
  <span class="nt">--fixed-price</span><span class="o">=</span>0.00005

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.CreateBsqSwapOfferRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CreateBsqSwapOffer</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">CreateBsqSwapOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setDirection</span><span class="o">(</span><span class="s">"BUY"</span><span class="o">)</span>    <span class="c1">// Buy BTC with BSQ</span>
                    <span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="mi">12500000</span><span class="o">)</span>    <span class="c1">// Satoshis</span>
                    <span class="o">.</span><span class="na">setMinAmount</span><span class="o">(</span><span class="mi">6250000</span><span class="o">)</span>  <span class="c1">// Satoshis</span>
                    <span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="s">"0.00005"</span><span class="o">)</span>    <span class="c1">// Price of 1 BSQ in BTC</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">createBsqSwapOffer</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">CreateBsqSwapOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">CreateBsqSwapOfferRequest</span><span class="p">(</span>
                <span class="n">direction</span><span class="o">=</span><span class="s">'SELL'</span><span class="p">,</span>  <span class="c1"># Buy BTC with BSQ
</span>                <span class="n">price</span><span class="o">=</span><span class="s">'0.00005'</span><span class="p">,</span>  <span class="c1"># Price of 1 BSQ in BTC
</span>                <span class="n">amount</span><span class="o">=</span><span class="mi">6250000</span><span class="p">,</span>  <span class="c1"># Satoshis
</span>                <span class="n">min_amount</span><span class="o">=</span><span class="mi">3125000</span><span class="p">),</span>  <span class="c1"># Optional parameter cannot be 0 Satoshis.
</span>            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'New BSQ swap offer: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">bsq_swap_offer</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-5'>Unary RPC</h3>
<p>Create a BSQ swap offer.</p>
<h3 id='grpc-request-createbsqswapofferrequest'>gRPC Request: CreateBsqSwapOfferRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>direction</td>
<td>string</td>
<td>The new BSQ swap offer&#39;s BUY (BTC) or SELL (BTC) direction.</td>
</tr>
<tr>
<td>amount</td>
<td>uint64</td>
<td>The amount of BTC to be traded as a long representing satoshi units.</td>
</tr>
<tr>
<td>min_amount</td>
<td>uint64</td>
<td>The minimum amount of BTC to be traded as a long representing satoshi units.</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>The fixed price of the offer as a string representing BTC units, e.g., &quot;0.00005&quot; or &quot;0.00005000&quot;.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-createbsqswapofferreply'>gRPC Response: CreateBsqSwapOfferReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bsq_swap_offer</td>
<td><a href="#offerinfo">OfferInfo</a></td>
<td>The newly created BSQ swap offer.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-createoffer'>RPC Method CreateOffer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># Create a fixed-price offer to buy BTC with EUR.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 createoffer <span class="se">\</span>
  <span class="nt">--payment-account-id</span><span class="o">=</span>f3c1ec8b-9761-458d-b13d-9039c6892413 <span class="se">\</span>
  <span class="nt">--direction</span><span class="o">=</span>BUY <span class="se">\</span>
  <span class="nt">--currency-code</span><span class="o">=</span>EUR <span class="se">\</span>
  <span class="nt">--amount</span><span class="o">=</span>0.125 <span class="se">\</span>
  <span class="nt">--min-amount</span><span class="o">=</span>0.0625 <span class="se">\</span>
  <span class="nt">--fixed-price</span><span class="o">=</span>34500 <span class="se">\</span>
  <span class="nt">--security-deposit</span><span class="o">=</span>15.0 <span class="se">\</span>
  <span class="nt">--fee-currency</span><span class="o">=</span>BSQ

<span class="c"># Create a market-price-margin based offer to sell BTC for JPY, at 0.5% above the current market JPY price.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 createoffer <span class="se">\</span>
  <span class="nt">--payment-account-id</span><span class="o">=</span>f3c1ec8b-9761-458d-b13d-9039c6892413 <span class="se">\</span>
  <span class="nt">--direction</span><span class="o">=</span>SELL <span class="se">\</span>
  <span class="nt">--currency-code</span><span class="o">=</span>JPY <span class="se">\</span>
  <span class="nt">--amount</span><span class="o">=</span>0.125 <span class="se">\</span>
  <span class="nt">--min-amount</span><span class="o">=</span>0.0625 <span class="se">\</span>
  <span class="nt">--market-price-margin</span><span class="o">=</span>0.5 <span class="se">\</span>
  <span class="nt">--security-deposit</span><span class="o">=</span>15.0 <span class="se">\</span>
  <span class="nt">--fee-currency</span><span class="o">=</span>BSQ

<span class="c"># Create an offer to swap 0.5 BTC for BSQ, at a price of 0.00005 BTC for 1 BSQ</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 createoffer <span class="se">\</span>
  <span class="nt">--swap</span><span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
  <span class="nt">--direction</span><span class="o">=</span>BUY <span class="se">\</span>
  <span class="nt">--currency-code</span><span class="o">=</span>BSQ <span class="se">\</span>
  <span class="nt">--amount</span><span class="o">=</span>0.5 <span class="se">\</span>
  <span class="nt">--fixed-price</span><span class="o">=</span>0.00005

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.CreateOfferRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CreateOffer</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>

            <span class="kt">var</span> <span class="n">fixedPriceOfferRequest</span> <span class="o">=</span> <span class="n">createFixedPriceEurOfferRequest</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">fixedPriceOfferResponse</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">createOffer</span><span class="o">(</span><span class="n">fixedPriceOfferRequest</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">fixedPriceOfferResponse</span><span class="o">);</span>
            <span class="n">waitForOfferPreparation</span><span class="o">(</span><span class="mi">5_000</span><span class="o">);</span>

            <span class="kt">var</span> <span class="n">marketBasedPriceOfferRequest</span> <span class="o">=</span> <span class="n">createMarketBasedPriceEurOfferRequest</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">marketBasedPriceOfferResponse</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">createOffer</span><span class="o">(</span><span class="n">marketBasedPriceOfferRequest</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">marketBasedPriceOfferResponse</span><span class="o">);</span>
            <span class="n">waitForOfferPreparation</span><span class="o">(</span><span class="mi">5_000</span><span class="o">);</span>

            <span class="kt">var</span> <span class="n">fixedPriceXmrOfferRequest</span> <span class="o">=</span> <span class="n">createFixedPriceXmrOfferRequest</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">fixedPriceXmrOfferResponse</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">createOffer</span><span class="o">(</span><span class="n">fixedPriceXmrOfferRequest</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">fixedPriceXmrOfferResponse</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">CreateOfferRequest</span> <span class="nf">createFixedPriceEurOfferRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">CreateOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setCurrencyCode</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setDirection</span><span class="o">(</span><span class="s">"BUY"</span><span class="o">)</span>                <span class="c1">// Buy BTC with EUR</span>
                <span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="s">"34500.00"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="mi">12500000</span><span class="o">)</span>                <span class="c1">// Satoshis</span>
                <span class="o">.</span><span class="na">setMinAmount</span><span class="o">(</span><span class="mi">6250000</span><span class="o">)</span>              <span class="c1">// Satoshis</span>
                <span class="o">.</span><span class="na">setBuyerSecurityDepositPct</span><span class="o">(</span><span class="mf">15.00</span><span class="o">)</span>  <span class="c1">// 15%</span>
                <span class="o">.</span><span class="na">setPaymentAccountId</span><span class="o">(</span><span class="s">"f3c1ec8b-9761-458d-b13d-9039c6892413"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setMakerFeeCurrencyCode</span><span class="o">(</span><span class="s">"BTC"</span><span class="o">)</span>     <span class="c1">// Pay Bisq trade fee in BTC</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">CreateOfferRequest</span> <span class="nf">createMarketBasedPriceEurOfferRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">CreateOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setCurrencyCode</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setDirection</span><span class="o">(</span><span class="s">"SELL"</span><span class="o">)</span>               <span class="c1">// Sell BTC for EUR</span>
                <span class="o">.</span><span class="na">setUseMarketBasedPrice</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setMarketPriceMarginPct</span><span class="o">(</span><span class="mf">3.25</span><span class="o">)</span>      <span class="c1">// Sell at 3.25% above market BTC price in EUR</span>
                <span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="mi">12500000</span><span class="o">)</span>                <span class="c1">// Satoshis</span>
                <span class="o">.</span><span class="na">setMinAmount</span><span class="o">(</span><span class="mi">6250000</span><span class="o">)</span>              <span class="c1">// Satoshis</span>
                <span class="o">.</span><span class="na">setBuyerSecurityDepositPct</span><span class="o">(</span><span class="mf">15.00</span><span class="o">)</span>  <span class="c1">// 15%</span>
                <span class="o">.</span><span class="na">setTriggerPrice</span><span class="o">(</span><span class="s">"0"</span><span class="o">)</span>               <span class="c1">// No trigger price</span>
                <span class="o">.</span><span class="na">setPaymentAccountId</span><span class="o">(</span><span class="s">"f3c1ec8b-9761-458d-b13d-9039c6892413"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setMakerFeeCurrencyCode</span><span class="o">(</span><span class="s">"BSQ"</span><span class="o">)</span>     <span class="c1">// Pay Bisq trade fee in BSQ</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">CreateOfferRequest</span> <span class="nf">createFixedPriceXmrOfferRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">CreateOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setCurrencyCode</span><span class="o">(</span><span class="s">"XMR"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setDirection</span><span class="o">(</span><span class="s">"BUY"</span><span class="o">)</span>                <span class="c1">// Buy BTC with XMR</span>
                <span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="s">"0.005"</span><span class="o">)</span>                  <span class="c1">// BTC price for 1 XMR</span>
                <span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="mi">12500000</span><span class="o">)</span>                <span class="c1">// Satoshis</span>
                <span class="o">.</span><span class="na">setMinAmount</span><span class="o">(</span><span class="mi">6250000</span><span class="o">)</span>              <span class="c1">// Satoshis</span>
                <span class="o">.</span><span class="na">setBuyerSecurityDepositPct</span><span class="o">(</span><span class="mf">33.00</span><span class="o">)</span>  <span class="c1">// 33%</span>
                <span class="o">.</span><span class="na">setPaymentAccountId</span><span class="o">(</span><span class="s">"g3c8ec8b-9aa1-458d-b66d-9039c6892413"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setMakerFeeCurrencyCode</span><span class="o">(</span><span class="s">"BSQ"</span><span class="o">)</span>     <span class="c1">// Pay Bisq trade fee in BSQ</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">waitForOfferPreparation</span><span class="o">(</span><span class="kt">long</span> <span class="n">ms</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// Wait new offer's preparation and wallet updates before attempting to create another offer.</span>
            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">5_000</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// ignored</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">create_offer_request</span> <span class="o">=</span> <span class="n">fixed_price_usd_request</span><span class="p">()</span>
        <span class="n">create_offer_response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">CreateOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">create_offer_request</span><span class="p">,</span>
                                                                        <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'New fixed-price offer: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">create_offer_response</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">offer</span><span class="p">))</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Wait for new offer preparation and wallet updates before creating another offer.
</span>
        <span class="n">create_offer_request</span> <span class="o">=</span> <span class="n">market_based_price_usd_request</span><span class="p">()</span>
        <span class="n">create_offer_response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">CreateOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">create_offer_request</span><span class="p">,</span>
                                                                        <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'New mkt price margin based offer: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">create_offer_response</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">offer</span><span class="p">))</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># Wait for new offer preparation and wallet updates before creating another offer.
</span>
        <span class="n">create_offer_request</span> <span class="o">=</span> <span class="n">fixed_price_xmr_request</span><span class="p">()</span>
        <span class="n">create_offer_response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">CreateOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">create_offer_request</span><span class="p">,</span>
                                                                        <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'New XMR offer: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">create_offer_response</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">offer</span><span class="p">))</span>

    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">fixed_price_usd_request</span><span class="p">():</span>
    <span class="c1"># Create an offer to buy BTC with USD at a fixed price.
</span>    <span class="k">return</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">CreateOfferRequest</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">'BUY'</span><span class="p">,</span>
                                            <span class="n">currency_code</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                                            <span class="n">price</span><span class="o">=</span><span class="s">'40000.00'</span><span class="p">,</span>
                                            <span class="n">amount</span><span class="o">=</span><span class="mi">12500000</span><span class="p">,</span>
                                            <span class="n">min_amount</span><span class="o">=</span><span class="mi">6250000</span><span class="p">,</span>
                                            <span class="n">buyer_security_deposit_pct</span><span class="o">=</span><span class="mf">20.00</span><span class="p">,</span>
                                            <span class="n">payment_account_id</span><span class="o">=</span><span class="s">'b6bed12d-92e3-4241-9975-2b3929476252'</span><span class="p">,</span>
                                            <span class="n">maker_fee_currency_code</span><span class="o">=</span><span class="s">'BSQ'</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">market_based_price_usd_request</span><span class="p">():</span>
    <span class="c1"># Create an offer to sell BTC for USD at a moving, market price margin.
</span>    <span class="k">return</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">CreateOfferRequest</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">'SELL'</span><span class="p">,</span>
                                            <span class="n">currency_code</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                                            <span class="n">use_market_based_price</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                            <span class="n">market_price_margin_pct</span><span class="o">=</span><span class="mf">2.50</span><span class="p">,</span>
                                            <span class="n">amount</span><span class="o">=</span><span class="mi">12500000</span><span class="p">,</span>
                                            <span class="n">min_amount</span><span class="o">=</span><span class="mi">6250000</span><span class="p">,</span>
                                            <span class="n">buyer_security_deposit_pct</span><span class="o">=</span><span class="mf">20.00</span><span class="p">,</span>
                                            <span class="n">payment_account_id</span><span class="o">=</span><span class="s">'b6bed12d-92e3-4241-9975-2b3929476252'</span><span class="p">,</span>
                                            <span class="n">maker_fee_currency_code</span><span class="o">=</span><span class="s">'BSQ'</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">fixed_price_xmr_request</span><span class="p">():</span>
    <span class="c1"># Create an offer to buy BTC with XMR.
</span>    <span class="k">return</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">CreateOfferRequest</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">'BUY'</span><span class="p">,</span>  <span class="c1"># Buy BTC with XMR
</span>                                            <span class="n">currency_code</span><span class="o">=</span><span class="s">'XMR'</span><span class="p">,</span>
                                            <span class="n">price</span><span class="o">=</span><span class="s">'0.005'</span><span class="p">,</span>  <span class="c1"># Price of 1 XMR in BTC
</span>                                            <span class="n">amount</span><span class="o">=</span><span class="mi">12500000</span><span class="p">,</span>
                                            <span class="n">min_amount</span><span class="o">=</span><span class="mi">6250000</span><span class="p">,</span>
                                            <span class="n">buyer_security_deposit_pct</span><span class="o">=</span><span class="mf">20.00</span><span class="p">,</span>
                                            <span class="n">payment_account_id</span><span class="o">=</span><span class="s">'02038bb3-02a4-4970-a392-194ab02f9c95'</span><span class="p">,</span>
                                            <span class="n">maker_fee_currency_code</span><span class="o">=</span><span class="s">'BTC'</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-6'>Unary RPC</h3>
<p>Create a v1 protocol offer.</p>
<h3 id='grpc-request-createofferrequest'>gRPC Request: CreateOfferRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency_code</td>
<td>string</td>
<td>The new offer&#39;s fiat or altcoin currency code.</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>The new v1 protocol offer&#39;s BUY (BTC) or SELL (BTC) direction.</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>For fiat offers:  a string representing the rounded, fixed fiat price of the offer, e.g., &quot;45000&quot;, not &quot;45000&quot;.<br/>For altcoin offers:  a string representing the fixed BTC price of the offer, e.g., &quot;0.00005&quot;.<br/></td>
</tr>
<tr>
<td>use_market_based_price</td>
<td>bool</td>
<td>Whether the offer price is fixed, or market price margin based.</td>
</tr>
<tr>
<td>market_price_margin_pct</td>
<td>double</td>
<td>The offer&#39;s market price margin as a percentage above or below the current market BTC price, e.g., 2.50 represents 2.5%.</td>
</tr>
<tr>
<td>amount</td>
<td>uint64</td>
<td>The amount of BTC to be traded, in satoshis.</td>
</tr>
<tr>
<td>min_amount</td>
<td>uint64</td>
<td>The minimum amount of BTC to be traded, in satoshis.</td>
</tr>
<tr>
<td>buyer_security_deposit_pct</td>
<td>double</td>
<td>A BUY BTC offer maker&#39;s security deposit as a percentage of the BTC amount to be traded, e.g., 15.00 represents 15%.</td>
</tr>
<tr>
<td>trigger_price</td>
<td>string</td>
<td>A market price margin based offer&#39;s trigger price is the market BTC price at which the offer is automatically disabled.<br/>Disabled offers are never automatically enabled, they must be manually re-enabled.<br/>A zero value indicates trigger price is not set.  Trigger price does not apply to fixed price offers.<br/></td>
</tr>
<tr>
<td>payment_account_id</td>
<td>string</td>
<td>The unique identifier of the payment account used to create the new offer, and send or receive trade payment.</td>
</tr>
<tr>
<td>maker_fee_currency_code</td>
<td>string</td>
<td>The offer maker&#39;s trade fee currency:  BTC or BSQ.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-createofferreply'>gRPC Response: CreateOfferReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer</td>
<td><a href="#offerinfo">OfferInfo</a></td>
<td>The newly created v1 protocol offer.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-editoffer'>RPC Method EditOffer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># Warning:  Editing an offer involves removing it from the offer book, then re-publishing</span>
<span class="c"># it with the changes.  This operation takes a few seconds and clients should not try</span>
<span class="c"># to make rapid changes to the same offer;  there must be a delay before each edit request</span>
<span class="c"># for the same offer.</span>

<span class="c"># Disable an offer.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 editoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea <span class="se">\</span>
  <span class="nt">--enable</span><span class="o">=</span><span class="nb">false</span>

<span class="c"># Enable an offer.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 editoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea <span class="se">\</span>
  <span class="nt">--enable</span><span class="o">=</span><span class="nb">true</span>

<span class="c"># Edit the fixed-price, and/or change a market price margin based offer to a fixed-price offer.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 editoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea <span class="se">\</span>
  <span class="nt">--fixed-price</span><span class="o">=</span>35000.5555

<span class="c"># Edit the price margin, and/or change a fixed-price offer to a market price margin based offer.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 editoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea <span class="se">\</span>
  <span class="nt">--market-price-margin</span><span class="o">=</span>0.5

<span class="c"># Set the trigger price on a market price margin based offer.</span>
<span class="c"># Note:  trigger prices do not apply to fixed-price offers.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 editoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea <span class="se">\</span>
  <span class="nt">--trigger-price</span><span class="o">=</span>3960000.0000

<span class="c"># Remove the trigger price from a market price margin based offer.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 editoffer <span class="se">\</span>
  <span class="nt">--trigger-price</span><span class="o">=</span>0

<span class="c"># Change a disabled fixed-price offer to a market price margin based offer, set a trigger price, and enable it.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 editoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea <span class="se">\</span>
  <span class="nt">--market-price-margin</span><span class="o">=</span>0.5 <span class="se">\</span>
  <span class="nt">--trigger-price</span><span class="o">=</span>33000.0000 <span class="se">\</span>
  <span class="nt">--enable</span><span class="o">=</span><span class="nb">true</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.EditOfferRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">bisq</span><span class="o">.</span><span class="na">proto</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">EditOfferRequest</span><span class="o">.</span><span class="na">EditType</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">bisq</span><span class="o">.</span><span class="na">proto</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">EditOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EditOffer</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>

            <span class="kt">var</span> <span class="n">disableOfferRequest</span> <span class="o">=</span> <span class="n">createDisableOfferRequest</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">editOffer</span><span class="o">(</span><span class="n">disableOfferRequest</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Offer is disabled (removed from peers' offer book)."</span><span class="o">);</span>
            <span class="n">waitForOfferToBeRepublished</span><span class="o">(</span><span class="mi">2_500</span><span class="o">);</span>

            <span class="kt">var</span> <span class="n">editFixedPriceRequest</span> <span class="o">=</span> <span class="n">createEditFixedPriceRequest</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">editOffer</span><span class="o">(</span><span class="n">editFixedPriceRequest</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Offer has been re-published with new fixed-price."</span><span class="o">);</span>
            <span class="n">waitForOfferToBeRepublished</span><span class="o">(</span><span class="mi">2_500</span><span class="o">);</span>

            <span class="kt">var</span> <span class="n">editFixedPriceAndEnableRequest</span> <span class="o">=</span> <span class="n">createEditFixedPriceAndEnableRequest</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">editOffer</span><span class="o">(</span><span class="n">editFixedPriceAndEnableRequest</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Offer has been re-published with new fixed-price, and enabled."</span><span class="o">);</span>
            <span class="n">waitForOfferToBeRepublished</span><span class="o">(</span><span class="mi">2_500</span><span class="o">);</span>

            <span class="kt">var</span> <span class="n">editPriceMarginRequest</span> <span class="o">=</span> <span class="n">createEditPriceMarginRequest</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">editOffer</span><span class="o">(</span><span class="n">editPriceMarginRequest</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Offer has been re-published with new price margin."</span><span class="o">);</span>
            <span class="n">waitForOfferToBeRepublished</span><span class="o">(</span><span class="mi">2_500</span><span class="o">);</span>

            <span class="kt">var</span> <span class="n">editTriggerPriceRequest</span> <span class="o">=</span> <span class="n">createEditTriggerPriceRequest</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">editOffer</span><span class="o">(</span><span class="n">editTriggerPriceRequest</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Offer has been re-published with new trigger price."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">EditOfferRequest</span> <span class="nf">createDisableOfferRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setEditType</span><span class="o">(</span><span class="no">ACTIVATION_STATE_ONLY</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setEnable</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>   <span class="c1">// -1 = ignore this parameter, 0 = disable offer, 1 = enable offer</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">EditOfferRequest</span> <span class="nf">createEditFixedPriceRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setEditType</span><span class="o">(</span><span class="no">FIXED_PRICE_ONLY</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="s">"30000.99"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">EditOfferRequest</span> <span class="nf">createEditFixedPriceAndEnableRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setEditType</span><span class="o">(</span><span class="no">FIXED_PRICE_AND_ACTIVATION_STATE</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="s">"30000.99"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setEnable</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">EditOfferRequest</span> <span class="nf">createEditPriceMarginRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setEditType</span><span class="o">(</span><span class="no">MKT_PRICE_MARGIN_ONLY</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setUseMarketBasedPrice</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setMarketPriceMarginPct</span><span class="o">(</span><span class="mf">2.00</span><span class="o">)</span>  <span class="c1">// 2.00%</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">EditOfferRequest</span> <span class="nf">createEditTriggerPriceRequest</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">newBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setEditType</span><span class="o">(</span><span class="no">TRIGGER_PRICE_ONLY</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setTriggerPrice</span><span class="o">(</span><span class="s">"29000.00"</span><span class="o">)</span>    <span class="c1">// Trigger price is disabled when set to "0".</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">waitForOfferToBeRepublished</span><span class="o">(</span><span class="kt">long</span> <span class="n">ms</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// Wait for edited offer to be removed from offer-book, edited, and re-published.</span>
            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">ms</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// ignored</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">edit_offer_request</span> <span class="o">=</span> <span class="n">disable_offer_request</span><span class="p">()</span>
        <span class="n">edit_offer_response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">EditOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">edit_offer_request</span><span class="p">,</span>
                                                                    <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Offer is disabled.  Rpc response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">edit_offer_response</span><span class="p">))</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Wait for new offer preparation and wallet updates before creating another offer.
</span>
        <span class="n">edit_offer_request</span> <span class="o">=</span> <span class="n">enable_offer_request</span><span class="p">()</span>
        <span class="n">edit_offer_response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">EditOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">edit_offer_request</span><span class="p">,</span>
                                                                    <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Offer is enabled.  Rpc response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">edit_offer_response</span><span class="p">))</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Wait for new offer preparation and wallet updates before creating another offer.
</span>
        <span class="n">edit_offer_request</span> <span class="o">=</span> <span class="n">edit_fixed_price_request</span><span class="p">()</span>
        <span class="n">edit_offer_response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">EditOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">edit_offer_request</span><span class="p">,</span>
                                                                    <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Offer fixed-price has been changed.  Rpc response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">edit_offer_response</span><span class="p">))</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Wait for new offer preparation and wallet updates before creating another offer.
</span>
        <span class="n">edit_offer_request</span> <span class="o">=</span> <span class="n">edit_fixed_price_and_enable_request</span><span class="p">()</span>
        <span class="n">edit_offer_response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">EditOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">edit_offer_request</span><span class="p">,</span>
                                                                    <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Offer fixed-price has been changed, and offer is enabled.  Rpc response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">edit_offer_response</span><span class="p">))</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Wait for new offer preparation and wallet updates before creating another offer.
</span>
        <span class="c1"># Change the fixed-price offer to a mkt price margin based offer
</span>        <span class="n">edit_offer_request</span> <span class="o">=</span> <span class="n">edit_price_margin_request</span><span class="p">()</span>
        <span class="n">edit_offer_response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">EditOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">edit_offer_request</span><span class="p">,</span>
                                                                    <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Fixed-price offer is not a mkt price margin based offer.  Rpc response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">edit_offer_response</span><span class="p">))</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Wait for new offer preparation and wallet updates before creating another offer.
</span>
        <span class="c1"># Set the trigger-price on a mkt price margin based offer
</span>        <span class="n">edit_offer_request</span> <span class="o">=</span> <span class="n">edit_trigger_price_request</span><span class="p">()</span>
        <span class="n">edit_offer_response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">EditOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">edit_offer_request</span><span class="p">,</span>
                                                                    <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Offer trigger price is set.  Rpc response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">edit_offer_response</span><span class="p">))</span>

    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">disable_offer_request</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'PEIUC-9b09c2d8-8485-47d7-b7e9-d01d320e9477-182'</span><span class="p">,</span>
        <span class="n">edit_type</span><span class="o">=</span><span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">.</span><span class="n">EditType</span><span class="p">.</span><span class="n">ACTIVATION_STATE_ONLY</span><span class="p">,</span>
        <span class="n">enable</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># If enable=-1: ignore enable param, enable=0: disable offer, enable=1: enable offer
</span>

<span class="k">def</span> <span class="nf">enable_offer_request</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'PEIUC-9b09c2d8-8485-47d7-b7e9-d01d320e9477-182'</span><span class="p">,</span>
        <span class="n">edit_type</span><span class="o">=</span><span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">.</span><span class="n">EditType</span><span class="p">.</span><span class="n">ACTIVATION_STATE_ONLY</span><span class="p">,</span>
        <span class="n">enable</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># If enable=-1: ignore enable param, enable=0: disable offer, enable=1: enable offer
</span>

<span class="k">def</span> <span class="nf">edit_fixed_price_request</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'PEIUC-9b09c2d8-8485-47d7-b7e9-d01d320e9477-182'</span><span class="p">,</span>
        <span class="n">price</span><span class="o">=</span><span class="s">'42000.50'</span><span class="p">,</span>
        <span class="n">edit_type</span><span class="o">=</span><span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">.</span><span class="n">EditType</span><span class="p">.</span><span class="n">FIXED_PRICE_ONLY</span><span class="p">,</span>
        <span class="n">enable</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># If enable=-1: ignore enable param, enable=0: disable offer, enable=1: enable offer
</span>

<span class="k">def</span> <span class="nf">edit_fixed_price_and_enable_request</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'PEIUC-9b09c2d8-8485-47d7-b7e9-d01d320e9477-182'</span><span class="p">,</span>
        <span class="n">price</span><span class="o">=</span><span class="s">'43000.50'</span><span class="p">,</span>
        <span class="n">edit_type</span><span class="o">=</span><span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">.</span><span class="n">EditType</span><span class="p">.</span><span class="n">FIXED_PRICE_AND_ACTIVATION_STATE</span><span class="p">,</span>
        <span class="n">enable</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># If enable=-1: ignore enable param, enable=0: disable offer, enable=1: enable offer
</span>

<span class="k">def</span> <span class="nf">edit_price_margin_request</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'PEIUC-9b09c2d8-8485-47d7-b7e9-d01d320e9477-182'</span><span class="p">,</span>
        <span class="n">use_market_based_price</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">market_price_margin_pct</span><span class="o">=</span><span class="mf">5.00</span><span class="p">,</span>
        <span class="n">edit_type</span><span class="o">=</span><span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">.</span><span class="n">EditType</span><span class="p">.</span><span class="n">MKT_PRICE_MARGIN_ONLY</span><span class="p">,</span>
        <span class="n">enable</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># If enable=-1: ignore enable param, enable=0: disable offer, enable=1: enable offer
</span>

<span class="k">def</span> <span class="nf">edit_trigger_price_request</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">(</span>
        <span class="nb">id</span><span class="o">=</span><span class="s">'PEIUC-9b09c2d8-8485-47d7-b7e9-d01d320e9477-182'</span><span class="p">,</span>
        <span class="n">trigger_price</span><span class="o">=</span><span class="s">'40000.0000'</span><span class="p">,</span>
        <span class="n">edit_type</span><span class="o">=</span><span class="n">bisq_messages</span><span class="p">.</span><span class="n">EditOfferRequest</span><span class="p">.</span><span class="n">EditType</span><span class="p">.</span><span class="n">TRIGGER_PRICE_ONLY</span><span class="p">,</span>
        <span class="n">enable</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># If enable=-1: ignore enable param, enable=0: disable offer, enable=1: enable offer
</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-7'>Unary RPC</h3>
<p>Edit an open offer.</p>
<h3 id='grpc-request-editofferrequest'>gRPC Request: EditOfferRequest</h3><h3 id='enum-edittype'>Enum: EditType</h3>
<p>The EditType determines and constricts what offer details can be modified by the request, simplifying param
validation.  (The CLI need to infer this detail from &#39;editoffer&#39; command options, other clients do not.)</p>

<table><thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ACTIVATION_STATE_ONLY</td>
<td>0</td>
<td>Edit only the offer&#39;s activation state (enabled or disabled).</td>
</tr>
<tr>
<td>FIXED_PRICE_ONLY</td>
<td>1</td>
<td>Edit only the offer&#39;s fixed price.</td>
</tr>
<tr>
<td>FIXED_PRICE_AND_ACTIVATION_STATE</td>
<td>2</td>
<td>Edit only the offer&#39;s fixed price and activation state.</td>
</tr>
<tr>
<td>MKT_PRICE_MARGIN_ONLY</td>
<td>3</td>
<td>Edit only the offer&#39;s market price margin.</td>
</tr>
<tr>
<td>MKT_PRICE_MARGIN_AND_ACTIVATION_STATE</td>
<td>4</td>
<td>Edit only the offer&#39;s market price margin and activation state.</td>
</tr>
<tr>
<td>TRIGGER_PRICE_ONLY</td>
<td>5</td>
<td>Edit only the market price margin based offer&#39;s trigger price.</td>
</tr>
<tr>
<td>TRIGGER_PRICE_AND_ACTIVATION_STATE</td>
<td>6</td>
<td>Edit only the market price margin based offer&#39;s trigger price and activation state.</td>
</tr>
<tr>
<td>MKT_PRICE_MARGIN_AND_TRIGGER_PRICE</td>
<td>7</td>
<td>Edit only the offer&#39;s market price margin and trigger price.</td>
</tr>
<tr>
<td>MKT_PRICE_MARGIN_AND_TRIGGER_PRICE_AND_ACTIVATION_STATE</td>
<td>8</td>
<td>Edit only the offer&#39;s market price margin, trigger price, and activation state.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The edited offer&#39;s unique identifier.</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>For fiat offers:  a string representing the new rounded, fixed fiat price of the offer, e.g., &quot;45000&quot;, not &quot;45000&quot;.<br/>For altcoin offers:  a string representing the new fixed BTC price of the offer, e.g., &quot;0.00005&quot;.<br/></td>
</tr>
<tr>
<td>use_market_based_price</td>
<td>bool</td>
<td>Whether the offer price is fixed, or market price margin based.</td>
</tr>
<tr>
<td>market_price_margin_pct</td>
<td>double</td>
<td>An offer&#39;s new market price margin as a percentage above or below the current market BTC price.</td>
</tr>
<tr>
<td>trigger_price</td>
<td>string</td>
<td>A market price margin based offer&#39;s trigger price is the market BTC price at which the offer is automatically disabled.<br/>Disabled offers are never automatically enabled, they must be manually re-enabled.<br/>A zero value indicates trigger price is not set.  Trigger price does not apply to fixed price offers.<br/></td>
</tr>
<tr>
<td>enable</td>
<td>sint32</td>
<td>Whether the offer&#39;s activation state should be changed (disable or enable), or left alone.<br/>Send a signed int, not a bool (with default=false).<br/>-1 = do not change activation state<br/>0 = disable<br/>1 = enable<br/></td>
</tr>
<tr>
<td>edit_type</td>
<td>EditType</td>
<td>Tell the daemon precisely what is being edited.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-editofferreply'>gRPC Response: EditOfferReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-getbsqswapoffer'>RPC Method GetBsqSwapOffer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetOfferRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetBsqSwapOffer</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getBsqSwapOffer</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetBsqSwapOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetOfferRequest</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'gs1dudwr-263fadaf-bb79-4960-935a-5eb272fcff2f-182'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-8'>Unary RPC</h3>
<p>Get the available BSQ swap offer with offer-id.</p>
<h3 id='grpc-request-getofferrequest'>gRPC Request: GetOfferRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The offer&#39;s unique identifier.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getbsqswapofferreply'>gRPC Response: GetBsqSwapOfferReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bsq_swap_offer</td>
<td><a href="#offerinfo">OfferInfo</a></td>
<td>The returned BSQ swap offer.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getbsqswapoffers'>RPC Method GetBsqSwapOffers</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Get available BSQ swap offers to buy BTC with BSQ.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getoffers <span class="nt">--direction</span><span class="o">=</span>BUY <span class="nt">--currency-code</span><span class="o">=</span>BSQ
<span class="c"># Get available BSQ swap offers to sell BTC for BSQ.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getoffers <span class="nt">--direction</span><span class="o">=</span>SELL <span class="nt">--currency-code</span><span class="o">=</span>BSQ

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetBsqSwapOffersRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetBsqSwapOffers</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetBsqSwapOffersRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setDirection</span><span class="o">(</span><span class="s">"SELL"</span><span class="o">)</span>   <span class="c1">// Offers to sell (swap) BTC for BSQ.</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getBsqSwapOffers</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetBsqSwapOffers</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetBsqSwapOffersRequest</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">'BUY'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-9'>Unary RPC</h3>
<p>Get all available BSQ swap offers with a BUY (BTC) or SELL (BTC) direction.</p>
<h3 id='grpc-request-getbsqswapoffersrequest'>gRPC Request: GetBsqSwapOffersRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>direction</td>
<td>string</td>
<td>The BSQ swap offer&#39;s BUY (BTC) or SELL (BTC) direction.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getbsqswapoffersreply'>gRPC Response: GetBsqSwapOffersReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bsq_swap_offers</td>
<td><a href="#offerinfo">array OfferInfo</a></td>
<td>The returned list of available BSQ swap offers.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getmybsqswapoffer'>RPC Method GetMyBsqSwapOffer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getmyoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetMyOfferRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetMyBsqSwapOffer</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetMyOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getMyBsqSwapOffer</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetMyBsqSwapOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetMyOfferRequest</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'lclcnqzk-870599d8-59c5-4776-979f-cfba4aad91e7-182'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-10'>Unary RPC</h3>
<p>Get user&#39;s BSQ swap offer with offer-id.</p>
<h3 id='grpc-request-getmyofferrequest'>gRPC Request: GetMyOfferRequest</h3>
<p>Deprecated with rpc method GetMyOffer since 27-Dec-2021 (v1.8.0).</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The offer&#39;s unique identifier.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getmybsqswapofferreply'>gRPC Response: GetMyBsqSwapOfferReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bsq_swap_offer</td>
<td><a href="#offerinfo">OfferInfo</a></td>
<td>The returned BSQ swap offer.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getmybsqswapoffers'>RPC Method GetMyBsqSwapOffers</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Get my BSQ swap offers to buy BTC for BSQ.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getmyoffers <span class="nt">--direction</span><span class="o">=</span>BUY <span class="nt">--currency-code</span><span class="o">=</span>BSQ
<span class="c"># Get my BSQ swap offers to sell BTC for BSQ.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getmyoffers <span class="nt">--direction</span><span class="o">=</span>SELL <span class="nt">--currency-code</span><span class="o">=</span>BSQ

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetBsqSwapOffersRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetMyBsqSwapOffers</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetBsqSwapOffersRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setDirection</span><span class="o">(</span><span class="s">"BUY"</span><span class="o">)</span>   <span class="c1">// Offers to buy (swap) BTC for BSQ.</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getBsqSwapOffers</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetMyBsqSwapOffers</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetBsqSwapOffersRequest</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">'BUY'</span><span class="p">),</span>  <span class="c1"># My buy BTC for BSQ swap offers
</span>            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-11'>Unary RPC</h3>
<p>Get all user&#39;s BSQ swap offers with a BUY (BTC) or SELL (BTC) direction.</p>
<h3 id='grpc-request-getbsqswapoffersrequest-2'>gRPC Request: GetBsqSwapOffersRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>direction</td>
<td>string</td>
<td>The BSQ swap offer&#39;s BUY (BTC) or SELL (BTC) direction.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getmybsqswapoffersreply'>gRPC Response: GetMyBsqSwapOffersReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bsq_swap_offers</td>
<td><a href="#offerinfo">array OfferInfo</a></td>
<td>The returned list of user&#39;s open BSQ swap offers.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getmyoffer'>RPC Method GetMyOffer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getmyoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetMyOfferRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetMyOffer</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetMyOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getMyOffer</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetMyOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetMyOfferRequest</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'L8xlRE-114612d6-f5db-4218-a0b3-9977934f69a3-182'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-12'>Unary RPC</h3>
<p>Get my open v1 protocol offer with offer-id.  Deprecated since 27-Dec-2021 (v1.8.0).  Use GetOffer.</p>
<h3 id='grpc-request-getmyofferrequest-2'>gRPC Request: GetMyOfferRequest</h3>
<p>Deprecated with rpc method GetMyOffer since 27-Dec-2021 (v1.8.0).</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The offer&#39;s unique identifier.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getmyofferreply'>gRPC Response: GetMyOfferReply</h3>
<p>Deprecated with rpc method GetMyOffer since 27-Dec-2021 (v1.8.0).</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer</td>
<td><a href="#offerinfo">OfferInfo</a></td>
<td>The returned v1 protocol offer.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getmyoffers'>RPC Method GetMyOffers</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Get my offers to buy BTC with EUR.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getmyoffers <span class="nt">--direction</span><span class="o">=</span>BUY <span class="nt">--currency-code</span><span class="o">=</span>EUR
<span class="c"># Get my offers to sell BTC for EUR.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getmyoffers <span class="nt">--direction</span><span class="o">=</span>SELL <span class="nt">--currency-code</span><span class="o">=</span>EUR

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetMyOffersRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetMyOffers</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetMyOffersRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setDirection</span><span class="o">(</span><span class="s">"BUY"</span><span class="o">)</span>        <span class="c1">// Offers to buy BTC</span>
                    <span class="o">.</span><span class="na">setCurrencyCode</span><span class="o">(</span><span class="s">"USD"</span><span class="o">)</span>     <span class="c1">// with USD</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getMyOffers</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetMyOffers</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetMyOffersRequest</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">'BUY'</span><span class="p">,</span>
                                             <span class="n">currency_code</span><span class="o">=</span><span class="s">'USD'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-13'>Unary RPC</h3>
<p>Get all user&#39;s open v1 protocol offers with a BUY (BTC) or SELL (BTC) direction.</p>
<h3 id='grpc-request-getmyoffersrequest'>gRPC Request: GetMyOffersRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>direction</td>
<td>string</td>
<td>The offers&#39; BUY (BTC) or SELL (BTC) direction.</td>
</tr>
<tr>
<td>currency_code</td>
<td>string</td>
<td>The offer&#39;s fiat or altcoin currency code.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getmyoffersreply'>gRPC Response: GetMyOffersReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td><a href="#offerinfo">array OfferInfo</a></td>
<td>The returned list of user&#39;s open offers.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getoffer'>RPC Method GetOffer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getoffer <span class="se">\</span>
  <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetOfferRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetOffer</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getOffer</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetOfferRequest</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'L8xlRE-114612d6-f5db-4218-a0b3-9977934f69a3-182'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-14'>Unary RPC</h3>
<p>Get the v1 protocol offer with offer-id.</p>
<h3 id='grpc-request-getofferrequest-2'>gRPC Request: GetOfferRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The offer&#39;s unique identifier.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getofferreply'>gRPC Response: GetOfferReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer</td>
<td><a href="#offerinfo">OfferInfo</a></td>
<td>The returned v1 protocol offer.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getoffercategory'>RPC Method GetOfferCategory</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Used internally by CLI;  there is no user CLI command 'getoffercategory'.</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetOfferCategoryRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetOfferCategory</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetOfferCategoryRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getOfferCategory</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetOfferCategory</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetOfferCategoryRequest</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'L8xlRE-114612d6-f5db-4218-a0b3-9977934f69a3-182'</span><span class="p">,</span>
                                                  <span class="n">is_my_offer</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">offer_category</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-15'>Unary RPC</h3>
<p>Get an offer&#39;s category, one of  FIAT, ALTCOIN, or BSQ_SWAP.  This information is needed before an offer
can be taken, and is used by a client to determine what kind of offer to take:  a v1 FIAT or ALTCOIN offer,
or a BSQ swap offer.  V1 and BSQ swap trades are handled differently in the API daemon.</p>
<h3 id='grpc-request-getoffercategoryrequest'>gRPC Request: GetOfferCategoryRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The offer&#39;s unique identifier.</td>
</tr>
<tr>
<td>is_my_offer</td>
<td>bool</td>
<td>Whether the offer was created by the user or not.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getoffercategoryreply'>gRPC Response: GetOfferCategoryReply</h3><h3 id='enum-offercategory'>Enum: OfferCategory</h3>
<table><thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>UNKNOWN</td>
<td>0</td>
<td>An invalid offer category probably indicates a software bug.</td>
</tr>
<tr>
<td>FIAT</td>
<td>1</td>
<td>Indicates offer is to BUY or SELL BTC with a fiat currency.</td>
</tr>
<tr>
<td>ALTCOIN</td>
<td>2</td>
<td>Indicates offer is to BUY or SELL BTC with an altcoin.</td>
</tr>
<tr>
<td>BSQ_SWAP</td>
<td>3</td>
<td>Indicates offer is to swap BTC for BSQ.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer_category</td>
<td>OfferCategory</td>
<td></td>
</tr>
</tbody></table>
<h2 id='rpc-method-getoffers'>RPC Method GetOffers</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Get available offers to buy BTC with JPY.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getoffers <span class="nt">--direction</span><span class="o">=</span>BUY <span class="nt">--currency-code</span><span class="o">=</span>JPY
<span class="c"># Get available offers to sell BTC for JPY.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getoffers <span class="nt">--direction</span><span class="o">=</span>SELL <span class="nt">--currency-code</span><span class="o">=</span>JPY

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetOffersRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetOffers</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetOffersRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setDirection</span><span class="o">(</span><span class="s">"SELL"</span><span class="o">)</span>       <span class="c1">// Available offers to sell BTC</span>
                    <span class="o">.</span><span class="na">setCurrencyCode</span><span class="o">(</span><span class="s">"JPY"</span><span class="o">)</span>     <span class="c1">// for JPY</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getOffers</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetOffers</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetOffersRequest</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">'BUY'</span><span class="p">,</span>
                                           <span class="n">currency_code</span><span class="o">=</span><span class="s">'USD'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-16'>Unary RPC</h3>
<p>Get all available v1 protocol offers with a BUY (BTC) or SELL (BTC) direction.</p>
<h3 id='grpc-request-getoffersrequest'>gRPC Request: GetOffersRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>direction</td>
<td>string</td>
<td>The offer&#39;s BUY (BTC) or SELL (BTC) direction.</td>
</tr>
<tr>
<td>currency_code</td>
<td>string</td>
<td>The offer&#39;s fiat or altcoin currency code.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getoffersreply'>gRPC Response: GetOffersReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td><a href="#offerinfo">array OfferInfo</a></td>
<td>The returned list of available offers.</td>
</tr>
</tbody></table>
<h1 id='service-paymentaccounts'>Service PaymentAccounts</h1>
<p>The PaymentAccounts service provides rpc methods for creating fiat and crypto currency payment accounts.</p>
<h2 id='rpc-method-createcryptocurrencypaymentaccount'>RPC Method CreateCryptoCurrencyPaymentAccount</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 createcryptopaymentacct
  <span class="nt">--account-name</span><span class="o">=</span><span class="s2">"My XMR Payment Account"</span> <span class="se">\</span>
  <span class="nt">--currency-code</span><span class="o">=</span>XMR <span class="se">\</span>
  <span class="nt">--address</span><span class="o">=</span>4AsjtNXChh3Va58czCWHjn9S8ZFnsxggGZoSePauBHmSMr8vY5aBSqrPtQ9Y9M1iwkBHxcuTWXJsJ4NDATQjQJyKBXR7WP7 <span class="se">\</span>
  <span class="nt">--trade-instant</span><span class="o">=</span><span class="nb">false</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.CreateCryptoCurrencyPaymentAccountRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.PaymentAccountsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CreateCryptoCurrencyPaymentAccount</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">PaymentAccountsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">xmrAddress</span> <span class="o">=</span> <span class="s">"4AsjtNXChh3Va58czCWHjn9S8ZFnsxggGZoSePauBHmSMr8vY5aBSqrPtQ9Y9M1iwkBHxcuTWXJsJ4NDATQjQJyKBXR7WP7"</span><span class="o">;</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">CreateCryptoCurrencyPaymentAccountRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setAccountName</span><span class="o">(</span><span class="s">"My Instant XMR Payment Account"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setCurrencyCode</span><span class="o">(</span><span class="s">"XMR"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="n">xmrAddress</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setTradeInstant</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">createCryptoCurrencyPaymentAccount</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"New XMR instant payment account: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getPaymentAccount</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">PaymentAccountsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">CreateCryptoCurrencyPaymentAccount</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">CreateCryptoCurrencyPaymentAccountRequest</span><span class="p">(</span>
                <span class="n">account_name</span><span class="o">=</span><span class="s">'name'</span><span class="p">,</span>
                <span class="n">currency_code</span><span class="o">=</span><span class="s">'XMR'</span><span class="p">,</span>
                <span class="n">address</span><span class="o">=</span><span class="s">'472CJ9TADoeVabhAe6byZQN4yqAFA4morKiyzb8DfLTj4hcQvsXNHxJUNYMw1JDmMALkQ3Bwmyn4aZYST7DzEw9nUeUTKVL'</span><span class="p">,</span>
                <span class="n">trade_instant</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-17'>Unary RPC</h3>
<p>Create a crypto currency (altcoin) payment account.</p>
<h3 id='grpc-request-createcryptocurrencypaymentaccountrequest'>gRPC Request: CreateCryptoCurrencyPaymentAccountRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_name</td>
<td>string</td>
<td>The name of the altcoin payment account.  Uniqueness is not enforced.</td>
</tr>
<tr>
<td>currency_code</td>
<td>string</td>
<td>The altcoin currency code.</td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>The altcoin receiving address.</td>
</tr>
<tr>
<td>trade_instant</td>
<td>bool</td>
<td>Whether the altcoin payment account is an instant account or not.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-createcryptocurrencypaymentaccountreply'>gRPC Response: CreateCryptoCurrencyPaymentAccountReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_account</td>
<td><a href="#paymentaccount">PaymentAccount</a></td>
<td>The new altcoin payment account.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-createpaymentaccount'>RPC Method CreatePaymentAccount</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Create a swift fiat payment account, providing details in a json form generated by getpaymentacctform.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 createpaymentacct <span class="nt">--payment-account-form</span><span class="o">=</span>swift.json

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.CreatePaymentAccountRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.PaymentAccountsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CreatePaymentAccount</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">PaymentAccountsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="c1">// Fill in the swift payment account json form generated by GetPaymentAccountForm.</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">CreatePaymentAccountRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setPaymentAccountForm</span><span class="o">(</span><span class="s">"/path/to/swift.json"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">createPaymentAccount</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"New swift payment account: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getPaymentAccount</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">PaymentAccountsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">CreatePaymentAccount</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">CreatePaymentAccountRequest</span><span class="p">(</span><span class="n">payment_account_form</span><span class="o">=</span><span class="s">'/tmp/swift.json'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-18'>Unary RPC</h3>
<p>Create a fiat payment account, providing details in a json form generated by rpc method GetPaymentAccountForm.</p>
<h3 id='grpc-request-createpaymentaccountrequest'>gRPC Request: CreatePaymentAccountRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_account_form</td>
<td>string</td>
<td>File path of filled json payment account form.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-createpaymentaccountreply'>gRPC Response: CreatePaymentAccountReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_account</td>
<td><a href="#paymentaccount">PaymentAccount</a></td>
<td>The new payment account.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getcryptocurrencypaymentmethods'>RPC Method GetCryptoCurrencyPaymentMethods</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Not yet supported in CLI.  API currently supports only BSQ, BSQ Swap, and XMR trading.</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetCryptoCurrencyPaymentMethodsRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.PaymentAccountsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetCryptoCurrencyPaymentMethods</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>
    <span class="c1">// Note:  API currently supports only BSQ, BSQ Swap, and XMR trading.</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">PaymentAccountsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetCryptoCurrencyPaymentMethodsRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getCryptoCurrencyPaymentMethods</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getPaymentMethodsList</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">PaymentAccountsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetCryptoCurrencyPaymentMethods</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetCryptoCurrencyPaymentMethodsRequest</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-19'>Unary RPC</h3>
<p>Get list of all supported Bisq crypto currency (altcoin) payment methods.</p>
<h3 id='grpc-request-getcryptocurrencypaymentmethodsrequest'>gRPC Request: GetCryptoCurrencyPaymentMethodsRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-getcryptocurrencypaymentmethodsreply'>gRPC Response: GetCryptoCurrencyPaymentMethodsReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_methods</td>
<td><a href="#paymentmethod">array PaymentMethod</a></td>
<td>Ids of all supported Bisq altcoin payment methods.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getpaymentaccountform'>RPC Method GetPaymentAccountForm</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Get a blank SWIFT payment account form and save the json file in the current working directory.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getpaymentacctform <span class="nt">--payment-method-id</span><span class="o">=</span>SWIFT

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetPaymentAccountFormRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.PaymentAccountsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.BufferedWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileWriter</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetPaymentAccountForm</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">PaymentAccountsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetPaymentAccountFormRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setPaymentMethodId</span><span class="o">(</span><span class="s">"SWIFT"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getPaymentAccountForm</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">paymentAccountFormJson</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getPaymentAccountFormJson</span><span class="o">();</span>
            <span class="nc">File</span> <span class="n">jsonFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"/tmp/blank-swift-account-form.json"</span><span class="o">);</span>
            <span class="nc">BufferedWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedWriter</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileWriter</span><span class="o">(</span><span class="n">jsonFile</span><span class="o">));</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">paymentAccountFormJson</span><span class="o">);</span>
            <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Swift payment account saved to "</span> <span class="o">+</span> <span class="n">jsonFile</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">PaymentAccountsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetPaymentAccountForm</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetPaymentAccountFormRequest</span><span class="p">(</span><span class="n">payment_method_id</span><span class="o">=</span><span class="s">'SWIFT'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-20'>Unary RPC</h3>
<p>Get a json template file for a supported Bisq payment method.  Fill in the form and call rpc method CreatePaymentAccount.</p>
<h3 id='grpc-request-getpaymentaccountformrequest'>gRPC Request: GetPaymentAccountFormRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_method_id</td>
<td>string</td>
<td>Payment method id determining content of the requested payment account form.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getpaymentaccountformreply'>gRPC Response: GetPaymentAccountFormReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_account_form_json</td>
<td>string</td>
<td>An empty payment account json form to be filled out and passed to rpc method CreatePaymentAccount.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getpaymentaccounts'>RPC Method GetPaymentAccounts</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Get list of all saved payment accounts, including altcoin accounts.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getpaymentaccts


</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetPaymentAccountsRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.PaymentAccountsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetPaymentAccounts</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">PaymentAccountsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetPaymentAccountsRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getPaymentAccounts</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getPaymentAccountsList</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">PaymentAccountsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetPaymentAccounts</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetPaymentAccountsRequest</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-21'>Unary RPC</h3>
<p>Get list of all saved fiat payment accounts.</p>
<h3 id='grpc-request-getpaymentaccountsrequest'>gRPC Request: GetPaymentAccountsRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-getpaymentaccountsreply'>gRPC Response: GetPaymentAccountsReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_accounts</td>
<td><a href="#paymentaccount">array PaymentAccount</a></td>
<td>All user&#39;s saved payment accounts.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getpaymentmethods'>RPC Method GetPaymentMethods</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Get the ids of all supported Bisq payment methods.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getpaymentmethods

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetPaymentMethodsRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.PaymentAccountsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetPaymentMethods</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">PaymentAccountsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetPaymentMethodsRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getPaymentMethods</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getPaymentMethodsList</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">PaymentAccountsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetPaymentMethods</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetPaymentMethodsRequest</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-22'>Unary RPC</h3>
<p>Get list of all supported Bisq payment methods.</p>
<h3 id='grpc-request-getpaymentmethodsrequest'>gRPC Request: GetPaymentMethodsRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-getpaymentmethodsreply'>gRPC Response: GetPaymentMethodsReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_methods</td>
<td><a href="#paymentmethod">array PaymentMethod</a></td>
<td>Ids of all supported Bisq fiat payment methods.</td>
</tr>
</tbody></table>
<h1 id='service-price'>Service Price</h1><h2 id='rpc-method-getmarketprice'>RPC Method GetMarketPrice</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Get most recently available market price of XMR in BTC.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getbtcprice <span class="nt">--currency-code</span><span class="o">=</span>XMR

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.MarketPriceRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.PriceGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetMarketPrice</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">PriceGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">MarketPriceRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setCurrencyCode</span><span class="o">(</span><span class="s">"XMR"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getMarketPrice</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Most recently available XMR market price: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getPrice</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">PriceStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetMarketPrice</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">MarketPriceRequest</span><span class="p">(</span><span class="n">currency_code</span><span class="o">=</span><span class="s">'USD'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-23'>Unary RPC</h3>
<p>Get the current market price for a crypto currency.</p>
<h3 id='grpc-request-marketpricerequest'>gRPC Request: MarketPriceRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency_code</td>
<td>string</td>
<td>The three letter currency code.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-marketpricereply'>gRPC Response: MarketPriceReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>double</td>
<td>The most recently available market price.</td>
</tr>
</tbody></table>
<h1 id='service-shutdownserver'>Service ShutdownServer</h1><h2 id='rpc-method-stop'>RPC Method Stop</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 stop

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.ShutdownServerGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.StopRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Stop</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">ShutdownServerGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">StopRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">stop</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Daemon is shutting down."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">ShutdownServerStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">Stop</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span><span class="n">bisq_messages</span><span class="p">.</span><span class="n">StopRequest</span><span class="p">(),</span>
                                                    <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-24'>Unary RPC</h3>
<p>Shut down a local Bisq daemon.</p>
<h3 id='grpc-request-stoprequest'>gRPC Request: StopRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-stopreply'>gRPC Response: StopReply</h3>
<p>This Response has no parameters.</p>
<h1 id='service-trades'>Service Trades</h1>
<p>The Trades service provides rpc methods for taking, executing, and listing trades.</p>
<h2 id='rpc-method-closetrade'>RPC Method CloseTrade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 closetrade <span class="nt">--trade-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.CloseTradeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TradesGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CloseTrade</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">TradesGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">CloseTradeRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setTradeId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">closeTrade</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Open trade is closed."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">TradesStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">CloseTrade</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">CloseTradeRequest</span><span class="p">(</span><span class="n">trade_id</span><span class="o">=</span><span class="s">'83e8b2e2-51b6-4f39-a748-3ebd29c22aea'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-25'>Unary RPC</h3>
<p>Close a completed trade;  move it to trade history.</p>
<h3 id='grpc-request-closetraderequest'>gRPC Request: CloseTradeRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_id</td>
<td>string</td>
<td>The unique identifier of the trade.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-closetradereply'>gRPC Response: CloseTradeReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-confirmpaymentreceived'>RPC Method ConfirmPaymentReceived</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Send message to BTC buyer that payment has been received.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 confirmpaymentreceived <span class="se">\</span>
  <span class="nt">--trade-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.ConfirmPaymentReceivedRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TradesGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConfirmPaymentReceived</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">TradesGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">ConfirmPaymentReceivedRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setTradeId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">confirmPaymentReceived</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Payment receipt confirmation message has been sent to BTC buyer."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">TradesStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">ConfirmPaymentReceived</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">ConfirmPaymentReceivedRequest</span><span class="p">(</span><span class="n">trade_id</span><span class="o">=</span><span class="s">'83e8b2e2-51b6-4f39-a748-3ebd29c22aea'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-26'>Unary RPC</h3>
<p>Send a &#39;payment received&#39; message to a trading peer (the BTC buyer).</p>
<h3 id='grpc-request-confirmpaymentreceivedrequest'>gRPC Request: ConfirmPaymentReceivedRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_id</td>
<td>string</td>
<td>The unique identifier of the open trade.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-confirmpaymentreceivedreply'>gRPC Response: ConfirmPaymentReceivedReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-confirmpaymentstarted'>RPC Method ConfirmPaymentStarted</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Send message to BTC seller that payment has been sent.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 confirmpaymentstarted <span class="se">\</span>
  <span class="nt">--trade-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.ConfirmPaymentStartedRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TradesGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConfirmPaymentStarted</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">TradesGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">ConfirmPaymentStartedRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setTradeId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">confirmPaymentStarted</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Payment started message has been sent to BTC seller."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">TradesStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">ConfirmPaymentStarted</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">ConfirmPaymentStartedRequest</span><span class="p">(</span><span class="n">trade_id</span><span class="o">=</span><span class="s">'83e8b2e2-51b6-4f39-a748-3ebd29c22aea'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-27'>Unary RPC</h3>
<p>Send a &#39;payment started&#39; message to a trading peer (the BTC seller).</p>
<h3 id='grpc-request-confirmpaymentstartedrequest'>gRPC Request: ConfirmPaymentStartedRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_id</td>
<td>string</td>
<td>The unique identifier of the open trade.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-confirmpaymentstartedreply'>gRPC Response: ConfirmPaymentStartedReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-failtrade'>RPC Method FailTrade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 failtrade <span class="nt">--trade-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.FailTradeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TradesGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FailTrade</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">TradesGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">FailTradeRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setTradeId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">failTrade</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Open trade has been moved to failed trades list."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">TradesStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">FailTrade</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">FailTradeRequest</span><span class="p">(</span><span class="n">trade_id</span><span class="o">=</span><span class="s">'83e8b2e2-51b6-4f39-a748-3ebd29c22aea'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-28'>Unary RPC</h3>
<p>Fail an open trade.</p>
<h3 id='grpc-request-failtraderequest'>gRPC Request: FailTradeRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_id</td>
<td>string</td>
<td>The unique identifier of the trade.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-failtradereply'>gRPC Response: FailTradeReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-gettrade'>RPC Method GetTrade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 gettrade <span class="nt">--trade-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetTradeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TradesGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetTrade</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">TradesGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetTradeRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setTradeId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getTrade</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Trade: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getTrade</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">TradesStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetTrade</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetTradeRequest</span><span class="p">(</span><span class="n">trade_id</span><span class="o">=</span><span class="s">'83e8b2e2-51b6-4f39-a748-3ebd29c22aea'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-29'>Unary RPC</h3>
<p>Get a currently open trade.</p>
<h3 id='grpc-request-gettraderequest'>gRPC Request: GetTradeRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_id</td>
<td>string</td>
<td>The unique identifier of the trade.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-gettradereply'>gRPC Response: GetTradeReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade</td>
<td><a href="#tradeinfo">TradeInfo</a></td>
<td>The unique identifier of the trade.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-gettrades'>RPC Method GetTrades</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Get currently open trades.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 gettrades
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 gettrades <span class="nt">--category</span><span class="o">=</span>OPEN

<span class="c"># Get completed trades.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 gettrades <span class="nt">--category</span><span class="o">=</span>CLOSED

<span class="c"># Get failed trades.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 gettrades <span class="nt">--category</span><span class="o">=</span>FAILED

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetTradesRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TradesGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">bisq</span><span class="o">.</span><span class="na">proto</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">GetTradesRequest</span><span class="o">.</span><span class="na">Category</span><span class="o">.</span><span class="na">CLOSED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetTrades</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">TradesGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetTradesRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setCategory</span><span class="o">(</span><span class="no">CLOSED</span><span class="o">)</span> <span class="c1">// Or currently OPEN, or FAILED</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getTrades</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Open trades: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getTradesList</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">TradesStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetTrades</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetTradesRequest</span><span class="p">(</span>
                <span class="n">category</span><span class="o">=</span><span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetTradesRequest</span><span class="p">.</span><span class="n">Category</span><span class="p">.</span><span class="n">CLOSED</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-30'>Unary RPC</h3>
<p>Get currently open, or historical trades (closed or failed).</p>
<h3 id='grpc-request-gettradesrequest'>gRPC Request: GetTradesRequest</h3><h3 id='enum-category'>Enum: Category</h3>
<p>Rpc method GetTrades parameter determining what category of trade list is is being requested.</p>

<table><thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>OPEN</td>
<td>0</td>
<td>Get all currently open trades.</td>
</tr>
<tr>
<td>CLOSED</td>
<td>1</td>
<td>Get all completed trades.</td>
</tr>
<tr>
<td>FAILED</td>
<td>2</td>
<td>Get all failed trades.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>category</td>
<td>Category</td>
<td></td>
</tr>
</tbody></table>
<h3 id='grpc-response-gettradesreply'>gRPC Response: GetTradesReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trades</td>
<td><a href="#tradeinfo">array TradeInfo</a></td>
<td>All trades for GetTradesRequest.Category.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-takeoffer'>RPC Method TakeOffer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>

<span class="c"># Take a BSQ swap offer.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 takeoffer <span class="nt">--offer-id</span><span class="o">=</span>8368b2e2-anb6-4ty9-ab09-3ebdk34f2aea

<span class="c"># Take an offer that is not a BSQ swap offer.</span>
<span class="c"># The payment-account-id param is required, the fee-currency param is optional.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 takeoffer <span class="se">\</span>
    <span class="nt">--offer-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea <span class="se">\</span>
    <span class="nt">--payment-account-id</span><span class="o">=</span>fe20cdbd-22be-4b8a-a4b6-d2608ff09d6e <span class="se">\</span>
    <span class="nt">--fee-currency</span><span class="o">=</span>BTC

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetOfferCategoryRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.OffersGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TakeOfferRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TradesGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">bisq</span><span class="o">.</span><span class="na">proto</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">GetOfferCategoryReply</span><span class="o">.</span><span class="na">OfferCategory</span><span class="o">.</span><span class="na">BSQ_SWAP</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">err</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TakeOffer</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">offersStub</span> <span class="o">=</span> <span class="nc">OffersGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">tradesStub</span> <span class="o">=</span> <span class="nc">TradesGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>

            <span class="c1">// We need to send our payment account id, and the taker fee currency code if offer is</span>
            <span class="c1">// not a BSQ swap offer.  Find out by calling GetOfferCategory before taking the offer.</span>
            <span class="kt">var</span> <span class="n">getOfferCategoryRequest</span> <span class="o">=</span> <span class="nc">GetOfferCategoryRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">offerCategory</span> <span class="o">=</span> <span class="n">offersStub</span><span class="o">.</span><span class="na">getOfferCategory</span><span class="o">(</span><span class="n">getOfferCategoryRequest</span><span class="o">);</span>
            <span class="c1">// Create a takeoffer request builder with just the offerId parameter.</span>
            <span class="kt">var</span> <span class="n">takeOfferRequestBuilder</span> <span class="o">=</span> <span class="nc">TakeOfferRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setOfferId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">);</span>
            <span class="c1">//  If offer is not a BSQ swap offer, add the paymentAccountId and takerFeeCurrencyCode parameters.</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">offerCategory</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">BSQ_SWAP</span><span class="o">))</span>
                <span class="n">takeOfferRequestBuilder</span>
                        <span class="o">.</span><span class="na">setPaymentAccountId</span><span class="o">(</span><span class="s">"f3c1ec8b-9761-458d-b13d-9039c6892413"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">setTakerFeeCurrencyCode</span><span class="o">(</span><span class="s">"BSQ"</span><span class="o">);</span>

            <span class="kt">var</span> <span class="n">takeOfferRequest</span> <span class="o">=</span> <span class="n">takeOfferRequestBuilder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">takeOfferResponse</span> <span class="o">=</span> <span class="n">tradesStub</span><span class="o">.</span><span class="na">takeOffer</span><span class="o">(</span><span class="n">takeOfferRequest</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">takeOfferResponse</span><span class="o">.</span><span class="na">hasFailureReason</span><span class="o">())</span>
                <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Take offer failure reason: "</span> <span class="o">+</span> <span class="n">takeOfferResponse</span><span class="o">.</span><span class="na">getFailureReason</span><span class="o">());</span>
            <span class="k">else</span>
                <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"New trade: "</span> <span class="o">+</span> <span class="n">takeOfferResponse</span><span class="o">.</span><span class="na">getTrade</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9999'</span><span class="p">)</span>
    <span class="n">grpc_offers_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">OffersStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">grpc_trades_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">TradesStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># We need to send our payment account id and an (optional) taker fee currency code if offer
</span>        <span class="c1"># is not a BSQ swap offer.  Find out by calling GetOfferCategory before taking the offer.
</span>        <span class="n">get_offer_category_response</span> <span class="o">=</span> <span class="n">grpc_offers_service_stub</span><span class="p">.</span><span class="n">GetOfferCategory</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetOfferCategoryRequest</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">'4940749-73a2e9c3-d5b9-440a-a05d-9feb8e8805f0-182'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="n">offer_category</span> <span class="o">=</span> <span class="n">get_offer_category_response</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">offer_category</span>
        <span class="n">is_bsq_swap</span> <span class="o">=</span> <span class="n">offer_category</span> <span class="o">==</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetOfferCategoryReply</span><span class="p">.</span><span class="n">BSQ_SWAP</span>
        <span class="n">take_offer_request</span> <span class="o">=</span> <span class="n">bisq_messages</span><span class="p">.</span><span class="n">TakeOfferRequest</span><span class="p">(</span><span class="n">offer_id</span><span class="o">=</span><span class="s">'4940749-73a2e9c3-d5b9-440a-a05d-9feb8e8805f0-182'</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_bsq_swap</span><span class="p">:</span>
            <span class="n">take_offer_request</span><span class="p">.</span><span class="n">payment_account_id</span> <span class="o">=</span> <span class="s">'44838060-ddb5-4fa4-8b34-c128a655316e'</span>
            <span class="n">take_offer_request</span><span class="p">.</span><span class="n">taker_fee_currency_code</span> <span class="o">=</span> <span class="s">'BSQ'</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_trades_service_stub</span><span class="p">.</span><span class="n">TakeOffer</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">take_offer_request</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-31'>Unary RPC</h3>
<p>Take an open offer.</p>
<h3 id='grpc-request-takeofferrequest'>gRPC Request: TakeOfferRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer_id</td>
<td>string</td>
<td>The unique identifier of the offer being taken.</td>
</tr>
<tr>
<td>payment_account_id</td>
<td>string</td>
<td>The unique identifier of the payment account used to take offer..</td>
</tr>
<tr>
<td>taker_fee_currency_code</td>
<td>string</td>
<td>The code of the currency (BSQ or BTC) used to pay the taker&#39;s Bisq trade fee.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-takeofferreply'>gRPC Response: TakeOfferReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade</td>
<td><a href="#tradeinfo">TradeInfo</a></td>
<td>The new trade.</td>
</tr>
<tr>
<td>failure_reason</td>
<td><a href="#availabilityresultwithdescription">AvailabilityResultWithDescription</a></td>
<td>The reason the offer could not be taken.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-unfailtrade'>RPC Method UnFailTrade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 unfailtrade <span class="nt">--trade-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TradesGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.UnFailTradeRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UnFailTrade</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">TradesGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">UnFailTradeRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setTradeId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">unFailTrade</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Failed trade has been moved to open trades list."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">TradesStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">UnFailTrade</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">UnFailTradeRequest</span><span class="p">(</span><span class="n">trade_id</span><span class="o">=</span><span class="s">'83e8b2e2-51b6-4f39-a748-3ebd29c22aea'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-32'>Unary RPC</h3>
<p>Unfail a failed trade.</p>
<h3 id='grpc-request-unfailtraderequest'>gRPC Request: UnFailTradeRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_id</td>
<td>string</td>
<td>The unique identifier of the trade.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-unfailtradereply'>gRPC Response: UnFailTradeReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-withdrawfunds'>RPC Method WithdrawFunds</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Withdraw BTC trade proceeds to external bitcoin wallet.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 withdrawfunds <span class="se">\</span>
  <span class="nt">--trade-id</span><span class="o">=</span>83e8b2e2-51b6-4f39-a748-3ebd29c22aea <span class="se">\</span>
  <span class="nt">--address</span><span class="o">=</span>bcrt1qqau7ad7lf8xx08mnxl709h6cdv4ma9u3ace5k2 <span class="se">\</span>
  <span class="nt">--memo</span><span class="o">=</span><span class="s2">"Optional memo saved with transaction in Bisq wallet."</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.TradesGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WithdrawFundsRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WithdrawFunds</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">TradesGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">WithdrawFundsRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setTradeId</span><span class="o">(</span><span class="s">"83e8b2e2-51b6-4f39-a748-3ebd29c22aea"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="s">"bcrt1qqau7ad7lf8xx08mnxl709h6cdv4ma9u3ace5k2"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setMemo</span><span class="o">(</span><span class="s">"Optional memo saved with transaction in Bisq wallet."</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">withdrawFunds</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"BTC trade proceeds have been sent to external bitcoin wallet."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">TradesStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">WithdrawFunds</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">WithdrawFundsRequest</span><span class="p">(</span><span class="n">trade_id</span><span class="o">=</span><span class="s">'83e8b2e2-51b6-4f39-a748-3ebd29c22aea'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-33'>Unary RPC</h3>
<p>Withdraw trade proceeds to an external bitcoin wallet address.</p>
<h3 id='grpc-request-withdrawfundsrequest'>gRPC Request: WithdrawFundsRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_id</td>
<td>string</td>
<td>The unique identifier of the trade.</td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>The receiver&#39;s bitcoin wallet address.</td>
</tr>
<tr>
<td>memo</td>
<td>string</td>
<td>An optional memo saved with the sent btc transaction.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-withdrawfundsreply'>gRPC Response: WithdrawFundsReply</h3>
<p>This Response has no parameters.</p>
<h1 id='service-wallets'>Service Wallets</h1>
<p>The Wallets service provides rpc methods for basic wallet operations such as checking balances,
 sending BTC or BSQ to external wallets, checking transaction fee rates, setting or unsetting
 an encryption password on a a wallet, and unlocking / locking an encrypted wallet.</p>
<h2 id='rpc-method-getaddressbalance'>RPC Method GetAddressBalance</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getaddressbalance <span class="nt">--address</span><span class="o">=</span>bcrt1qygvsqmyt8jyhtp7l3zwqm7s7v3nar6vkc2luz3

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetAddressBalanceRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetAddressBalance</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetAddressBalanceRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="s">"mwLYmweQf2dCgAqQCb3qU2UbxBycVBi2PW"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getAddressBalance</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetAddressBalance</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetAddressBalanceRequest</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s">'mwLYmweQf2dCgAqQCb3qU2UbxBycVBi2PW'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-34'>Unary RPC</h3>
<p>Get BTC balance for a wallet address.</p>
<h3 id='grpc-request-getaddressbalancerequest'>gRPC Request: GetAddressBalanceRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>The BTC wallet address being queried.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getaddressbalancereply'>gRPC Response: GetAddressBalanceReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address_balance_info</td>
<td><a href="#addressbalanceinfo">AddressBalanceInfo</a></td>
<td>The BTC wallet address with its balance summary.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getbalances'>RPC Method GetBalances</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getbalance
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getbalance <span class="nt">--currency-code</span><span class="o">=</span>BSQ
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getbalance <span class="nt">--currency-code</span><span class="o">=</span>BTC

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetBalancesRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetBalances</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetBalancesRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getBalances</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"BSQ "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getBalances</span><span class="o">().</span><span class="na">getBsq</span><span class="o">());</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"BTC "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getBalances</span><span class="o">().</span><span class="na">getBtc</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetBalances</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetBalancesRequest</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-35'>Unary RPC</h3>
<p>Get the Bisq wallet&#39;s current BSQ and BTC balances.</p>
<h3 id='grpc-request-getbalancesrequest'>gRPC Request: GetBalancesRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency_code</td>
<td>string</td>
<td>The Bisq wallet currency (BSQ or BTC) for the balances request.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-getbalancesreply'>gRPC Response: GetBalancesReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>balances</td>
<td><a href="#balancesinfo">BalancesInfo</a></td>
<td>The summary of Bisq wallet&#39;s BSQ and BTC balances.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getfundingaddresses'>RPC Method GetFundingAddresses</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getfundingaddresses

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetFundingAddressesRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetFundingAddresses</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetFundingAddressesRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getFundingAddresses</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetFundingAddresses</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetFundingAddressesRequest</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-36'>Unary RPC</h3>
<p>Get all bitcoin receiving addresses in the Bisq BTC wallet.</p>
<h3 id='grpc-request-getfundingaddressesrequest'>gRPC Request: GetFundingAddressesRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-getfundingaddressesreply'>gRPC Response: GetFundingAddressesReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address_balance_info</td>
<td><a href="#addressbalanceinfo">array AddressBalanceInfo</a></td>
<td>The list of BTC wallet addresses with their balances.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-gettransaction'>RPC Method GetTransaction</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 gettransaction <span class="se">\</span>
  <span class="nt">--transaction-id</span><span class="o">=</span>fef206f2ada53e70fd8430d130e43bc3994ce075d50ac1f4fda8182c40ef6bdd

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetTransactionRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetTransaction</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetTransactionRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setTxId</span><span class="o">(</span><span class="s">"fef206f2ada53e70fd8430d130e43bc3994ce075d50ac1f4fda8182c40ef6bdd"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetTransaction</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetTransactionRequest</span><span class="p">(</span>
                <span class="n">tx_id</span><span class="o">=</span><span class="s">'76ac4f6a4ad09e2e2c223d22509b8fc129fd8eb06851abee6b416ca1efaceb2c'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-37'>Unary RPC</h3>
<p>Get a bitcoin transaction summary.</p>
<h3 id='grpc-request-gettransactionrequest'>gRPC Request: GetTransactionRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_id</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h3 id='grpc-response-gettransactionreply'>gRPC Response: GetTransactionReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_info</td>
<td><a href="#txinfo">TxInfo</a></td>
<td>The summary of a bitcoin transaction.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-gettxfeerate'>RPC Method GetTxFeeRate</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 gettxfeerate

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetTxFeeRateRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetTxFeeRate</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetTxFeeRateRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getTxFeeRate</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetTxFeeRate</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetTxFeeRateRequest</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-38'>Unary RPC</h3>
<p>Get the Bisq network&#39;s most recently available bitcoin miner transaction fee rate, or custom fee rate if set.</p>
<h3 id='grpc-request-gettxfeeraterequest'>gRPC Request: GetTxFeeRateRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-gettxfeeratereply'>gRPC Response: GetTxFeeRateReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_fee_rate_info</td>
<td><a href="#txfeerateinfo">TxFeeRateInfo</a></td>
<td>The summary of the most recently available bitcoin transaction fee rates.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-getunusedbsqaddress'>RPC Method GetUnusedBsqAddress</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 getunusedbsqaddress

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.GetUnusedBsqAddressRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetUnusedBsqAddress</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">GetUnusedBsqAddressRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getUnusedBsqAddress</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">GetUnusedBsqAddress</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">GetUnusedBsqAddressRequest</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-39'>Unary RPC</h3>
<p>Get an unused BSQ wallet address.</p>
<h3 id='grpc-request-getunusedbsqaddressrequest'>gRPC Request: GetUnusedBsqAddressRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-getunusedbsqaddressreply'>gRPC Response: GetUnusedBsqAddressReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>The BSQ wallet&#39;s unused address.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-lockwallet'>RPC Method LockWallet</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 lockwallet

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.LockWalletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LockWallet</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">LockWalletRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">lockWallet</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Wallet is locked."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">LockWallet</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">LockWalletRequest</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-40'>Unary RPC</h3>
<p>Lock an encrypted Bisq wallet before the UnlockWallet rpc method&#39;s timeout period has expired.</p>
<h3 id='grpc-request-lockwalletrequest'>gRPC Request: LockWalletRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-lockwalletreply'>gRPC Response: LockWalletReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-removewalletpassword'>RPC Method RemoveWalletPassword</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Note: CLI command option parser expects a --wallet-password option, to differentiate it from an api daemon password.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 removewalletpassword <span class="nt">--wallet-password</span><span class="o">=</span><span class="s2">"abc"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.RemoveWalletPasswordRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RemoveWalletPassword</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">RemoveWalletPasswordRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"abc"</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">removeWalletPassword</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Wallet encryption password is removed."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">RemoveWalletPassword</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">RemoveWalletPasswordRequest</span><span class="p">(</span><span class="n">password</span><span class="o">=</span><span class="s">'abc'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-41'>Unary RPC</h3>
<p>Remove the encryption password from the Bisq wallet.</p>
<h3 id='grpc-request-removewalletpasswordrequest'>gRPC Request: RemoveWalletPasswordRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>string</td>
<td>The Bisq wallet&#39;s current encryption password.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-removewalletpasswordreply'>gRPC Response: RemoveWalletPasswordReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-sendbsq'>RPC Method SendBsq</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 sendbsq <span class="se">\</span>
  <span class="nt">--address</span><span class="o">=</span>Bbcrt1q9elrmtxtzpwt25zq2pmeeu6qk8029w404ad0xn <span class="se">\</span>
  <span class="nt">--amount</span><span class="o">=</span>1000.10

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.SendBsqRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendBsq</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">SendBsqRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="s">"Bbcrt1q9elrmtxtzpwt25zq2pmeeu6qk8029w404ad0xn"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="s">"50.50"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setTxFeeRate</span><span class="o">(</span><span class="s">"50"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">sendBsq</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">SendBsq</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">SendBsqRequest</span><span class="p">(</span>
                <span class="n">address</span><span class="o">=</span><span class="s">'Bbcrt1q9elrmtxtzpwt25zq2pmeeu6qk8029w404ad0xn'</span><span class="p">,</span>
                <span class="n">amount</span><span class="o">=</span><span class="s">'10.00'</span><span class="p">,</span>
                <span class="n">tx_fee_rate</span><span class="o">=</span><span class="s">'10'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-42'>Unary RPC</h3>
<p>Send an amount of BSQ to an external address.</p>
<h3 id='grpc-request-sendbsqrequest'>gRPC Request: SendBsqRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>The external BSQ wallet address.</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>The amount being sent to the external BSQ wallet address, as a string in &quot;#######,##&quot; format.</td>
</tr>
<tr>
<td>tx_fee_rate</td>
<td>string</td>
<td>An optional bitcoin miner transaction fee rate, in sats/byte.  If not defined, Bisq will revert<br/>to the custom transaction fee rate preference, if set, else the common Bisq network fee rate.<br/></td>
</tr>
</tbody></table>
<h3 id='grpc-response-sendbsqreply'>gRPC Response: SendBsqReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_info</td>
<td><a href="#txinfo">TxInfo</a></td>
<td>The summary of a bitcoin transaction.  (BSQ is a colored coin, and transacted on the bitcoin blockchain.)</td>
</tr>
</tbody></table>
<h2 id='rpc-method-sendbtc'>RPC Method SendBtc</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 sendbtc <span class="se">\</span>
  <span class="nt">--address</span><span class="o">=</span>bcrt1qqau7ad7lf8xx08mnxl709h6cdv4ma9u3ace5k2 <span class="se">\</span>
  <span class="nt">--amount</span><span class="o">=</span>0.006 <span class="se">\</span>
  <span class="nt">--tx-fee-rate</span><span class="o">=</span>20

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.SendBtcRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SendBtc</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">SendBtcRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="s">"bcrt1qqau7ad7lf8xx08mnxl709h6cdv4ma9u3ace5k2"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="s">"0.005"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setTxFeeRate</span><span class="o">(</span><span class="s">"50"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setMemo</span><span class="o">(</span><span class="s">"Optional memo."</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">sendBtc</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">SendBtc</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">SendBtcRequest</span><span class="p">(</span>
                <span class="n">address</span><span class="o">=</span><span class="s">'bcrt1qr3tjm77z3qzkf4kstj9v3yw9ewhjqjefz3c48y'</span><span class="p">,</span>
                <span class="n">amount</span><span class="o">=</span><span class="s">'0.006'</span><span class="p">,</span>
                <span class="n">tx_fee_rate</span><span class="o">=</span><span class="s">'15'</span><span class="p">,</span>
                <span class="n">memo</span><span class="o">=</span><span class="s">'Optional memo saved with transaction in Bisq wallet.'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-43'>Unary RPC</h3>
<p>Send an amount of BTC to an external address.</p>
<h3 id='grpc-request-sendbtcrequest'>gRPC Request: SendBtcRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>The external bitcoin address.</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>The amount of BTC to send to the external address, as a string in &quot;##.########&quot; (BTC unit) format.</td>
</tr>
<tr>
<td>tx_fee_rate</td>
<td>string</td>
<td>An optional bitcoin miner transaction fee rate, in sats/byte.  If not defined, Bisq will revert<br/>to the custom transaction fee rate preference, if set, else the common Bisq network fee rate.<br/></td>
</tr>
<tr>
<td>memo</td>
<td>string</td>
<td>An optional memo associated with the bitcoin transaction.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-sendbtcreply'>gRPC Response: SendBtcReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_info</td>
<td><a href="#txinfo">TxInfo</a></td>
<td>The summary of a bitcoin transaction.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-settxfeeratepreference'>RPC Method SetTxFeeRatePreference</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 settxfeerate <span class="nt">--tx-fee-rate</span><span class="o">=</span>50

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.SetTxFeeRatePreferenceRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SetTxFeeRatePreference</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">SetTxFeeRatePreferenceRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setTxFeeRatePreference</span><span class="o">(</span><span class="mi">25</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">setTxFeeRatePreference</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">SetTxFeeRatePreference</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">SetTxFeeRatePreferenceRequest</span><span class="p">(</span><span class="n">tx_fee_rate_preference</span><span class="o">=</span><span class="mi">20</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-44'>Unary RPC</h3>
<p>Set the Bisq daemon&#39;s custom bitcoin miner transaction fee rate, in sats/byte..</p>
<h3 id='grpc-request-settxfeeratepreferencerequest'>gRPC Request: SetTxFeeRatePreferenceRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_fee_rate_preference</td>
<td>uint64</td>
<td></td>
</tr>
</tbody></table>
<h3 id='grpc-response-settxfeeratepreferencereply'>gRPC Response: SetTxFeeRatePreferenceReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_fee_rate_info</td>
<td><a href="#txfeerateinfo">TxFeeRateInfo</a></td>
<td>The summary of the most recently available bitcoin transaction fee rates.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-setwalletpassword'>RPC Method SetWalletPassword</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
<span class="c"># Note: CLI command option parser expects a --wallet-password option, to differentiate it from an api daemon password.</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 setwalletpassword <span class="nt">--wallet-password</span><span class="o">=</span><span class="s2">"abc"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.SetWalletPasswordRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SetWalletPassword</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">SetWalletPasswordRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"abc"</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">setWalletPassword</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Wallet encryption password is set."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">SetWalletPassword</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">SetWalletPasswordRequest</span><span class="p">(</span><span class="n">password</span><span class="o">=</span><span class="s">'abc'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-45'>Unary RPC</h3>
<p>Set the Bisq wallet&#39;s encryption password.</p>
<h3 id='grpc-request-setwalletpasswordrequest'>gRPC Request: SetWalletPasswordRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>string</td>
<td>The new password for encrypting an unencrypted Bisq wallet.</td>
</tr>
<tr>
<td>new_password</td>
<td>string</td>
<td>The new password for encrypting an already encrypted Bisq wallet (a password override).</td>
</tr>
</tbody></table>
<h3 id='grpc-response-setwalletpasswordreply'>gRPC Response: SetWalletPasswordReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-unlockwallet'>RPC Method UnlockWallet</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 unlockwallet <span class="nt">--wallet-password</span><span class="o">=</span>abc <span class="nt">--timeout</span><span class="o">=</span>30

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.UnlockWalletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UnlockWallet</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">UnlockWalletRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">"abc"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setTimeout</span><span class="o">(</span><span class="mi">120</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">stub</span><span class="o">.</span><span class="na">unlockWallet</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Wallet is unlocked."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">UnlockWallet</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">UnlockWalletRequest</span><span class="p">(</span><span class="n">password</span><span class="o">=</span><span class="s">'abc'</span><span class="p">,</span>
                                              <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-46'>Unary RPC</h3>
<p>Unlock a Bisq encrypted wallet before calling wallet sensitive rpc methods: CreateOffer, TakeOffer, GetBalances,
etc., for a timeout period in seconds.  An unlocked wallet will automatically lock itself after the timeout
period has expired, or a LockWallet request has been made, whichever is first.  An unlocked wallet&#39;s timeout
setting can be overridden by subsequent UnlockWallet calls.</p>
<h3 id='grpc-request-unlockwalletrequest'>gRPC Request: UnlockWalletRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>string</td>
<td>The Bisq wallet&#39;s encryption password.</td>
</tr>
<tr>
<td>timeout</td>
<td>uint64</td>
<td>The Bisq wallet&#39;s unlock time period, in seconds.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-unlockwalletreply'>gRPC Response: UnlockWalletReply</h3>
<p>This Response has no parameters.</p>
<h2 id='rpc-method-unsettxfeeratepreference'>RPC Method UnsetTxFeeRatePreference</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 unsettxfeerate

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.UnsetTxFeeRatePreferenceRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UnsetTxFeeRatePreference</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">UnsetTxFeeRatePreferenceRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">unsetTxFeeRatePreference</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">UnsetTxFeeRatePreference</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">UnsetTxFeeRatePreferenceRequest</span><span class="p">(),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Response: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-47'>Unary RPC</h3>
<p>Remove the custom bitcoin miner transaction fee rate;  revert to the Bisq network&#39;s bitcoin miner transaction fee rate.</p>
<h3 id='grpc-request-unsettxfeeratepreferencerequest'>gRPC Request: UnsetTxFeeRatePreferenceRequest</h3>
<p>This Request has no parameters.</p>
<h3 id='grpc-response-unsettxfeeratepreferencereply'>gRPC Response: UnsetTxFeeRatePreferenceReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_fee_rate_info</td>
<td><a href="#txfeerateinfo">TxFeeRateInfo</a></td>
<td>The summary of the most recently available bitcoin transaction fee rates.</td>
</tr>
</tbody></table>
<h2 id='rpc-method-verifybsqsenttoaddress'>RPC Method VerifyBsqSentToAddress</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c">#!/bin/bash</span>
./bisq-cli <span class="nt">--password</span><span class="o">=</span>xyz <span class="nt">--port</span><span class="o">=</span>9998 verifybsqsenttoaddress <span class="se">\</span>
  <span class="nt">--address</span><span class="o">=</span>Bbcrt1q9elrmtxtzpwt25zq2pmeeu6qk8029w404ad0xn <span class="se">\</span>
  <span class="nt">--amount</span><span class="o">=</span><span class="s2">"50.50"</span>

</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">bisq.proto.grpc.VerifyBsqSentToAddressRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">bisq.proto.grpc.WalletsGrpc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannelBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">out</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">VerifyBsqSentToAddress</span> <span class="kd">extends</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">channel</span> <span class="o">=</span> <span class="nc">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">9998</span><span class="o">).</span><span class="na">usePlaintext</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
            <span class="n">addChannelShutdownHook</span><span class="o">(</span><span class="n">channel</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">credentials</span> <span class="o">=</span> <span class="n">buildCallCredentials</span><span class="o">(</span><span class="n">getApiPassword</span><span class="o">());</span>
            <span class="kt">var</span> <span class="n">stub</span> <span class="o">=</span> <span class="nc">WalletsGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">).</span><span class="na">withCallCredentials</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="o">=</span> <span class="nc">VerifyBsqSentToAddressRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="s">"Bbcrt1q9elrmtxtzpwt25zq2pmeeu6qk8029w404ad0xn"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="s">"50.50"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">verifyBsqSentToAddress</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Address did receive amount of BSQ: "</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="na">getIsAmountReceived</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">handleError</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">//////////////////</span>
<span class="c1">// BaseJavaExample</span>
<span class="c1">//////////////////</span>

<span class="kn">package</span> <span class="nn">examples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.grpc.CallCredentials</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.ManagedChannel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.Metadata</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.grpc.StatusRuntimeException</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Executor</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Metadata</span><span class="o">.</span><span class="na">ASCII_STRING_MARSHALLER</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">grpc</span><span class="o">.</span><span class="na">Status</span><span class="o">.</span><span class="na">UNAUTHENTICATED</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseJavaExample</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addChannelShutdownHook</span><span class="o">(</span><span class="nc">ManagedChannel</span> <span class="n">channel</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">().</span><span class="na">awaitTermination</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="no">SECONDS</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Error shutting down gRPC channel."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}));</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getApiPassword</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Enter api password:"</span><span class="o">);</span>
        <span class="kt">var</span> <span class="n">apiPassword</span> <span class="o">=</span> <span class="s">"xyz"</span><span class="o">;</span>    <span class="c1">// scanner.nextLine();</span>
        <span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">apiPassword</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">CallCredentials</span> <span class="nf">buildCallCredentials</span><span class="o">(</span><span class="nc">String</span> <span class="n">apiPassword</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CallCredentials</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyRequestMetadata</span><span class="o">(</span><span class="nc">RequestInfo</span> <span class="n">requestInfo</span><span class="o">,</span>
                                             <span class="nc">Executor</span> <span class="n">appExecutor</span><span class="o">,</span>
                                             <span class="nc">MetadataApplier</span> <span class="n">metadataApplier</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">appExecutor</span><span class="o">.</span><span class="na">execute</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="kt">var</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Metadata</span><span class="o">();</span>
                        <span class="kt">var</span> <span class="n">passwordKey</span> <span class="o">=</span> <span class="nc">Metadata</span><span class="o">.</span><span class="na">Key</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="no">ASCII_STRING_MARSHALLER</span><span class="o">);</span>
                        <span class="n">headers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">passwordKey</span><span class="o">,</span> <span class="n">apiPassword</span><span class="o">);</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">headers</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Throwable</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">metadataApplier</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="no">UNAUTHENTICATED</span><span class="o">.</span><span class="na">withCause</span><span class="o">(</span><span class="n">ex</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">});</span>
            <span class="o">}</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">thisUsesUnstableApi</span><span class="o">()</span> <span class="o">{</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">handleError</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">t</span> <span class="k">instanceof</span> <span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">var</span> <span class="n">grpcErrorStatus</span> <span class="o">=</span> <span class="o">((</span><span class="nc">StatusRuntimeException</span><span class="o">)</span> <span class="n">t</span><span class="o">).</span><span class="na">getStatus</span><span class="o">();</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getCode</span><span class="o">()</span> <span class="o">+</span> <span class="s">": "</span> <span class="o">+</span> <span class="n">grpcErrorStatus</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">t</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">grpc</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="k">print</span>

<span class="c1"># from getpass import getpass
</span><span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2</span> <span class="k">as</span> <span class="n">bisq_messages</span>
<span class="kn">import</span> <span class="nn">bisq.api.grpc_pb2_grpc</span> <span class="k">as</span> <span class="n">bisq_service</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">grpc_channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="p">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="s">'localhost:9998'</span><span class="p">)</span>
    <span class="n">grpc_service_stub</span> <span class="o">=</span> <span class="n">bisq_service</span><span class="p">.</span><span class="n">WalletsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
    <span class="n">api_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'xyz'</span>  <span class="c1"># getpass("Enter API password: ")
</span>    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">grpc_service_stub</span><span class="p">.</span><span class="n">VerifyBsqSentToAddress</span><span class="p">.</span><span class="n">with_call</span><span class="p">(</span>
            <span class="n">bisq_messages</span><span class="p">.</span><span class="n">VerifyBsqSentToAddressRequest</span><span class="p">(</span>
                <span class="n">address</span><span class="o">=</span><span class="s">'Bbcrt1q9elrmtxtzpwt25zq2pmeeu6qk8029w404ad0xn'</span><span class="p">,</span>
                <span class="n">amount</span><span class="o">=</span><span class="s">'10.00'</span><span class="p">),</span>
            <span class="n">metadata</span><span class="o">=</span><span class="p">[(</span><span class="s">'password'</span><span class="p">,</span> <span class="n">api_password</span><span class="p">)])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'BSQ amount was received at address: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">is_amount_received</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">grpc</span><span class="p">.</span><span class="n">RpcError</span> <span class="k">as</span> <span class="n">rpc_error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'gRPC API Exception: %s'</span><span class="p">,</span> <span class="n">rpc_error</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div><h3 id='unary-rpc-48'>Unary RPC</h3>
<p>Verify a specific amount of BSQ was received by a BSQ wallet address.
This is a problematic way of verifying BSQ payment has been received for a v1 trade protocol BSQ-BTC trade,
which has been solved by the introduction of BSQ swap trades, which use a different, unused BSQ address for each trade.</p>
<h3 id='grpc-request-verifybsqsenttoaddressrequest'>gRPC Request: VerifyBsqSentToAddressRequest</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>The internal BSQ wallet address.</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>The amount supposedly sent to the BSQ wallet address, as a string in &quot;#######,##&quot; format.</td>
</tr>
</tbody></table>
<h3 id='grpc-response-verifybsqsenttoaddressreply'>gRPC Response: VerifyBsqSentToAddressReply</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>is_amount_received</td>
<td>bool</td>
<td>Whether a specific BSQ wallet address has received a specific amount of BSQ.  If the same address has received<br/>the same amount of BSQ more than once, a true value does not indicate payment has been made for a v1 protocol<br/>BSQ-BTC trade.  This BSQ payment verification problem is solved with BSQ swaps, which use a different BSQ<br/>address for each swap transaction.<br/></td>
</tr>
</tbody></table>
<h1 id='grpc-messages'>gRPC Messages</h1><h2 id='achtransferaccountpayload'>AchTransferAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_address</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='addressbalanceinfo'>AddressBalanceInfo</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>The bitcoin wallet address.</td>
</tr>
<tr>
<td>balance</td>
<td>int64</td>
<td>The address&#39; BTC balance in satoshis.</td>
</tr>
<tr>
<td>num_confirmations</td>
<td>int64</td>
<td>The number of confirmations for the most recent transaction referencing the output address.</td>
</tr>
<tr>
<td>is_address_unused</td>
<td>bool</td>
<td>Whether the bitcoin address has ever been used, or not.</td>
</tr>
</tbody></table>
<h2 id='advancedcashaccountpayload'>AdvancedCashAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='alipayaccountpayload'>AliPayAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='amazongiftcardaccountpayload'>AmazonGiftCardAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email_or_mobile_nr</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>country_code</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='australiapayidpayload'>AustraliaPayidPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bank_account_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>payid</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='availabilityresultwithdescription'>AvailabilityResultWithDescription</h2>
<p>An offer&#39;s current availability status.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>availability_result</td>
<td><a href="#availabilityresult">AvailabilityResult</a></td>
<td>An offer&#39;s current status as an eum.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>A user friendly description of an offer&#39;s current availability status.</td>
</tr>
</tbody></table>
<h2 id='balancesinfo'>BalancesInfo</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bsq</td>
<td><a href="#bsqbalanceinfo">BsqBalanceInfo</a></td>
<td>BSQ wallet balance information.</td>
</tr>
<tr>
<td>btc</td>
<td><a href="#btcbalanceinfo">BtcBalanceInfo</a></td>
<td>BTC wallet balance information.</td>
</tr>
</tbody></table>
<h2 id='bankaccountpayload'>BankAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>branch_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>account_type</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_tax_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>one of {</td>
<td>&nbsp;</td>
<td>Field value will be one of the following.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;ach_transfer_account_payload</td>
<td><a href="#achtransferaccountpayload">AchTransferAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;domestic_wire_transfer_account_payload</td>
<td><a href="#domesticwiretransferaccountpayload">DomesticWireTransferAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;national_bank_account_payload</td>
<td><a href="#nationalbankaccountpayload">NationalBankAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;same_bank_accont_payload</td>
<td><a href="#samebankaccountpayload">SameBankAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;specific_banks_account_payload</td>
<td><a href="#specificbanksaccountpayload">SpecificBanksAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>}</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>national_account_id</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='bizumaccountpayload'>BizumAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mobile_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='bsqbalanceinfo'>BsqBalanceInfo</h2>
<p>TODO Thoroughly review field descriptions.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>available_confirmed_balance</td>
<td>uint64</td>
<td>The BSQ amount currently available to send to other addresses at the user&#39;s discretion, in satoshis.</td>
</tr>
<tr>
<td>unverified_balance</td>
<td>uint64</td>
<td>The BSQ amount currently being used in send transactions, in satoshis. Unverified BSQ balances are<br/>not spendable until returned to the available_confirmed_balance when send transactions have been confirmed.<br/></td>
</tr>
<tr>
<td>unconfirmed_change_balance</td>
<td>uint64</td>
<td>The BSQ transaction change amount tied up in unconfirmed transactions, remaining unspendable until transactions<br/>have been confirmed and the change returned to the available_confirmed_balance.<br/></td>
</tr>
<tr>
<td>locked_for_voting_balance</td>
<td>uint64</td>
<td>The locked BSQ amount held by DAO voting transaction.</td>
</tr>
<tr>
<td>lockup_bonds_balance</td>
<td>uint64</td>
<td>The locked BSQ amount held by DAO bonding transaction.</td>
</tr>
<tr>
<td>unlocking_bonds_balance</td>
<td>uint64</td>
<td>The BSQ bonding amount in unlocking state, awaiting a lockup transaction&#39;s lock time expiry before the funds<br/>can be spent in normal transactions.<br/></td>
</tr>
</tbody></table>
<h2 id='bsqswapaccountpayload'>BsqSwapAccountPayload</h2><h2 id='bsqswaptradeinfo'>BsqSwapTradeInfo</h2>
<p>BSQ Swap protocol specific fields not common to Bisq v1 trade protocol fields.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_id</td>
<td>string</td>
<td>The BSQ swap&#39;s bitcoin transaction id.</td>
</tr>
<tr>
<td>bsq_trade_amount</td>
<td>uint64</td>
<td>The amount of BSQ swapped in satoshis.</td>
</tr>
<tr>
<td>btc_trade_amount</td>
<td>uint64</td>
<td>The amount of BTC swapped in satoshis.</td>
</tr>
<tr>
<td>bsq_maker_trade_fee</td>
<td>uint64</td>
<td>The swap offer maker&#39;s BSQ trade fee.</td>
</tr>
<tr>
<td>bsq_taker_trade_fee</td>
<td>uint64</td>
<td>The swap offer taker&#39;s BSQ trade fee.</td>
</tr>
<tr>
<td>tx_fee_per_vbyte</td>
<td>uint64</td>
<td>The swap transaction&#39;s bitcoin transaction id.</td>
</tr>
<tr>
<td>maker_bsq_address</td>
<td>string</td>
<td>The swap offer maker&#39;s BSQ wallet address.</td>
</tr>
<tr>
<td>maker_btc_address</td>
<td>string</td>
<td>The swap offer maker&#39;s BTC wallet address.</td>
</tr>
<tr>
<td>taker_bsq_address</td>
<td>string</td>
<td>The swap offer taker&#39;s BSQ wallet address.</td>
</tr>
<tr>
<td>taker_btc_address</td>
<td>string</td>
<td>The swap offer taker&#39;s BTC wallet address.</td>
</tr>
<tr>
<td>num_confirmations</td>
<td>uint64</td>
<td>The confirmations count for the completed swap&#39;s bitcoin transaction.</td>
</tr>
<tr>
<td>error_message</td>
<td>string</td>
<td>An explanation for a failure to complete the swap.</td>
</tr>
<tr>
<td>payout</td>
<td>uint64</td>
<td>The amount of the user&#39;s trade payout in satoshis.</td>
</tr>
<tr>
<td>swap_peer_payout</td>
<td>uint64</td>
<td>The amount of the peer&#39;s trade payout in satoshis.</td>
</tr>
</tbody></table>
<h2 id='btcbalanceinfo'>BtcBalanceInfo</h2>
<p>TODO Thoroughly review field descriptions.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>available_balance</td>
<td>uint64</td>
<td>The BTC amount currently available to send to other addresses at the user&#39;s discretion, in satoshis.</td>
</tr>
<tr>
<td>reserved_balance</td>
<td>uint64</td>
<td>The BTC amount currently reserved to cover open offers&#39; security deposits, and BTC sellers&#39; payout amounts,<br/>in satoshis.  Reserved funds are not spendable, but are recoverable by users. When a user cancels an offer<br/>funds reserved for that offer are returned to the available_balance.<br/></td>
</tr>
<tr>
<td>total_available_balance</td>
<td>uint64</td>
<td>The sum of available_balance + reserved_balance, in satoshis.</td>
</tr>
<tr>
<td>locked_balance</td>
<td>uint64</td>
<td>The BTC amount being locked to cover the security deposits and BTC seller&#39;s pending trade payouts.  Locked<br/>funds are not recoverable until a trade is completed, when security deposits are returned to the available_balance.<br/></td>
</tr>
</tbody></table>
<h2 id='capitualaccountpayload'>CapitualAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='cashappaccountpayload'>CashAppAccountPayload</h2>
<p>Deprecated, not used.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cash_tag</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='cashbymailaccountpayload'>CashByMailAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>postal_address</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>contact</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>extra_info</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='cashdepositaccountpayload'>CashDepositAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>branch_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>account_type</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>requirements</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_tax_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>national_account_id</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='celpayaccountpayload'>CelPayAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='chasequickpayaccountpayload'>ChaseQuickPayAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='clearxchangeaccountpayload'>ClearXchangeAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>email_or_mobile_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='contractinfo'>ContractInfo</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buyer_node_address</td>
<td>string</td>
<td>The BTC buyer peer&#39;s node address.</td>
</tr>
<tr>
<td>seller_node_address</td>
<td>string</td>
<td>The BTC seller peer&#39;s node address.</td>
</tr>
<tr>
<td>mediator_node_address</td>
<td>string</td>
<td>If the trade was disputed, the Bisq mediator&#39;s node address.</td>
</tr>
<tr>
<td>refund_agent_node_address</td>
<td>string</td>
<td>If a trade refund was requested, the Bisq refund agent&#39;s node address.</td>
</tr>
<tr>
<td>is_buyer_maker_and_seller_taker</td>
<td>bool</td>
<td>Whether the BTC buyer created the original offer, or not.</td>
</tr>
<tr>
<td>maker_account_id</td>
<td>string</td>
<td>The offer maker&#39;s payment account id.</td>
</tr>
<tr>
<td>taker_account_id</td>
<td>string</td>
<td>The offer taker&#39;s payment account id.</td>
</tr>
<tr>
<td>maker_payment_account_payload</td>
<td><a href="#paymentaccountpayloadinfo">PaymentAccountPayloadInfo</a></td>
<td>A summary of the offer maker&#39;s payment account.</td>
</tr>
<tr>
<td>taker_payment_account_payload</td>
<td><a href="#paymentaccountpayloadinfo">PaymentAccountPayloadInfo</a></td>
<td>A summary of the offer taker&#39;s payment account.</td>
</tr>
<tr>
<td>maker_payout_address_string</td>
<td>string</td>
<td>The offer maker&#39;s BTC payout address.</td>
</tr>
<tr>
<td>taker_payout_address_string</td>
<td>string</td>
<td>The offer taker&#39;s BTC payout address.</td>
</tr>
<tr>
<td>lock_time</td>
<td>uint64</td>
<td>The earliest time a transaction can be added to the block chain.</td>
</tr>
</tbody></table>
<h2 id='countrybasedpaymentaccountpayload'>CountryBasedPaymentAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>countryCode</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>one of {</td>
<td>&nbsp;</td>
<td>Field value will be one of the following.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;bank_account_payload</td>
<td><a href="#bankaccountpayload">BankAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;bizum_account_payload</td>
<td><a href="#bizumaccountpayload">BizumAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;cash_deposit_account_payload</td>
<td><a href="#cashdepositaccountpayload">CashDepositAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;f2f_account_payload</td>
<td><a href="#f2faccountpayload">F2FAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;ifsc_based_account_payload</td>
<td><a href="#ifscbasedaccountpayload">IfscBasedAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;nequi_account_payload</td>
<td><a href="#nequiaccountpayload">NequiAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;paytm_account_payload</td>
<td><a href="#paytmaccountpayload">PaytmAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;pix_account_payload</td>
<td><a href="#pixaccountpayload">PixAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;satispay_account_payload</td>
<td><a href="#satispayaccountpayload">SatispayAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;sepa_account_payload</td>
<td><a href="#sepaaccountpayload">SepaAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;sepa_instant_account_payload</td>
<td><a href="#sepainstantaccountpayload">SepaInstantAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;strike_account_payload</td>
<td><a href="#strikeaccountpayload">StrikeAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;tikkie_account_payload</td>
<td><a href="#tikkieaccountpayload">TikkieAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;transferwise_usd_account_payload</td>
<td><a href="#transferwiseusdaccountpayload">TransferwiseUsdAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;upi_account_payload</td>
<td><a href="#upiaccountpayload">UpiAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;western_union_account_payload</td>
<td><a href="#westernunionaccountpayload">WesternUnionAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>}</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody></table>
<h2 id='cryptocurrency'>CryptoCurrency</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>is_asset</td>
<td>bool</td>
<td></td>
</tr>
</tbody></table>
<h2 id='cryptocurrencyaccountpayload'>CryptoCurrencyAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='currency'>Currency</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency_code</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='domesticwiretransferaccountpayload'>DomesticWireTransferAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_address</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='f2faccountpayload'>F2FAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>contact</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>extra_info</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='fasterpaymentsaccountpayload'>FasterPaymentsAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sort_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='fiatcurrency'>FiatCurrency</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td><a href="#currency">Currency</a></td>
<td></td>
</tr>
</tbody></table>
<h2 id='halcashaccountpayload'>HalCashAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mobile_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='ifscbasedaccountpayload'>IfscBasedAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>ifsc</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>one of {</td>
<td>&nbsp;</td>
<td>Field value will be one of the following.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;imps_account_payload</td>
<td><a href="#impsaccountpayload">ImpsAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;neft_account_payload</td>
<td><a href="#neftaccountpayload">NeftAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;rtgs_account_payload</td>
<td><a href="#rtgsaccountpayload">RtgsAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>}</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody></table>
<h2 id='impsaccountpayload'>ImpsAccountPayload</h2><h2 id='instantcryptocurrencyaccountpayload'>InstantCryptoCurrencyAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='interacetransferaccountpayload'>InteracETransferAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>question</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>answer</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='japanbankaccountpayload'>JapanBankAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bank_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_branch_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_branch_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_account_type</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_account_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_account_number</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='moneseaccountpayload'>MoneseAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mobile_nr</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='moneybeamaccountpayload'>MoneyBeamAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='moneygramaccountpayload'>MoneyGramAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>country_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='nationalbankaccountpayload'>NationalBankAccountPayload</h2><h2 id='neftaccountpayload'>NeftAccountPayload</h2><h2 id='nequiaccountpayload'>NequiAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mobile_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='okpayaccountpayload'>OKPayAccountPayload</h2>
<p>Deprecated, not used.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='offerinfo'>OfferInfo</h2>
<p>OfferInfo describes an offer to a client.  It is derived from the heavier
Offer object in the daemon, which holds too much state to be sent to clients.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The offer&#39;s unique identifier.</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>The offer&#39;s BUY (BTC) or SELL (BTC) direction.</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>For fiat offers:  the fiat price for 1 BTC to 4 decimal places, e.g., 45000 EUR is &quot;45000.0000&quot;.<br/>For altcoin offers:  the altcoin price for 1 BTC to 8 decimal places, e.g., 0.00005 BTC is &quot;0.00005000&quot;.<br/></td>
</tr>
<tr>
<td>use_market_based_price</td>
<td>bool</td>
<td>Whether the offer price is fixed, or market price margin based.</td>
</tr>
<tr>
<td>market_price_margin_pct</td>
<td>double</td>
<td>The offer&#39;s market price margin above or below the current market BTC price, e.g., 5.00 represents 5%.</td>
</tr>
<tr>
<td>amount</td>
<td>uint64</td>
<td>The offer&#39;s BTC amount in satoshis.  Ten million satoshis is represented as 10000000.</td>
</tr>
<tr>
<td>min_amount</td>
<td>uint64</td>
<td>The offer&#39;s minimum BTC amount in satoshis.  One million satoshis is represented as 1000000.</td>
</tr>
<tr>
<td>volume</td>
<td>string</td>
<td>The rounded volume of currency to be traded for BTC.<br/>Fiat volume is rounded to whole currency units (no cents).  Altcoin volume is rounded to 2 decimal places.<br/></td>
</tr>
<tr>
<td>min_volume</td>
<td>string</td>
<td>The rounded, minimum volume of currency to be traded for BTC.<br/>Fiat volume is rounded to whole currency units (no cents).  Altcoin volume is rounded to 2 decimal places.<br/></td>
</tr>
<tr>
<td>buyer_security_deposit</td>
<td>uint64</td>
<td>A long representing the BTC buyer&#39;s security deposit in satoshis.</td>
</tr>
<tr>
<td>trigger_price</td>
<td>string</td>
<td>A market price margin based offer&#39;s trigger price is the market BTC price at which the offer is automatically disabled.<br/>Disabled offers are never automatically enabled, they must be manually re-enabled.<br/>A zero value indicates trigger price is not set.  Trigger price does not apply to fixed price offers.<br/></td>
</tr>
<tr>
<td>is_currency_for_maker_fee_btc</td>
<td>bool</td>
<td>Whether the offer maker paid the trading fee in BTC or not (BSQ).</td>
</tr>
<tr>
<td>payment_account_id</td>
<td>string</td>
<td>The unique identifier of the payment account used to create the offer.</td>
</tr>
<tr>
<td>payment_method_id</td>
<td>string</td>
<td>The unique identifier of the payment method used to create the offer.</td>
</tr>
<tr>
<td>payment_method_short_name</td>
<td>string</td>
<td>The short description of the payment method used to create the offer.</td>
</tr>
<tr>
<td>base_currency_code</td>
<td>string</td>
<td>For fiat offers, the baseCurrencyCode is BTC, and the counter_currency_code is the fiat currency code.<br/>For altcoin offers it is the opposite, the baseCurrencyCode is the altcoin code and the counter_currency_code is BTC.<br/></td>
</tr>
<tr>
<td>counter_currency_code</td>
<td>string</td>
<td>For fiat offers, the base_currency_code is BTC, and the counter_currency_code is the fiat currency code.<br/>For altcoin offers it is the opposite, the base_currency_code is the altcoin code and the counter_currency_code is BTC.<br/></td>
</tr>
<tr>
<td>date</td>
<td>uint64</td>
<td>The creation date of the offer as a long: the number of milliseconds that have elapsed since January 1, 1970.</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The internal state of the offer, e.g., AVAILABLE, NOT_AVAILABLE, REMOVED, etc.</td>
</tr>
<tr>
<td>seller_security_deposit</td>
<td>uint64</td>
<td>A long representing the BTC seller&#39;s security deposit in satoshis.</td>
</tr>
<tr>
<td>offer_fee_payment_tx_id</td>
<td>string</td>
<td>The bitcoin transaction id of the offer maker&#39;s fee payment.</td>
</tr>
<tr>
<td>tx_fee</td>
<td>uint64</td>
<td>The bitcoin transaction fee (amount) for the offer maker&#39;s fee payment transaction, in satoshis.</td>
</tr>
<tr>
<td>maker_fee</td>
<td>uint64</td>
<td>The offer maker&#39;s Bisq trade fee amount in satoshis.</td>
</tr>
<tr>
<td>is_activated</td>
<td>bool</td>
<td>Whether the offer is currently enabled or not.</td>
</tr>
<tr>
<td>is_my_offer</td>
<td>bool</td>
<td>Whether the offer was created by the user or not.</td>
</tr>
<tr>
<td>is_my_pending_offer</td>
<td>bool</td>
<td>Whether the newly created offer was created by the user or not.</td>
</tr>
<tr>
<td>is_bsq_swap_offer</td>
<td>bool</td>
<td>Whether the offer is a BSQ swap offer or not (v1 protocol offer).</td>
</tr>
<tr>
<td>owner_node_address</td>
<td>string</td>
<td>The offer creator&#39;s Tor onion address.</td>
</tr>
<tr>
<td>pub_key_ring</td>
<td>string</td>
<td>The offer creator&#39;s public key ring as a string.</td>
</tr>
<tr>
<td>version_nr</td>
<td>string</td>
<td>The Bisq software version used to create the offer.</td>
</tr>
<tr>
<td>protocol_version</td>
<td>int32</td>
<td>The bitcoin protocol version used to create the offer.</td>
</tr>
</tbody></table>
<h2 id='paxumaccountpayload'>PaxumAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='paymentaccount'>PaymentAccount</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>creation_date</td>
<td>int64</td>
<td></td>
</tr>
<tr>
<td>payment_method</td>
<td><a href="#paymentmethod">PaymentMethod</a></td>
<td></td>
</tr>
<tr>
<td>account_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>trade_currencies</td>
<td><a href="#tradecurrency">array TradeCurrency</a></td>
<td></td>
</tr>
<tr>
<td>selected_trade_currency</td>
<td><a href="#tradecurrency">TradeCurrency</a></td>
<td></td>
</tr>
<tr>
<td>payment_account_payload</td>
<td><a href="#paymentaccountpayload">PaymentAccountPayload</a></td>
<td></td>
</tr>
</tbody></table>
<h2 id='paymentaccountpayload'>PaymentAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>payment_method_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>one of {</td>
<td>&nbsp;</td>
<td>Field value will be one of the following.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;advanced_cash_account_payload</td>
<td><a href="#advancedcashaccountpayload">AdvancedCashAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;ali_pay_account_payload</td>
<td><a href="#alipayaccountpayload">AliPayAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;amazon_gift_card_account_payload</td>
<td><a href="#amazongiftcardaccountpayload">AmazonGiftCardAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;australia_payid_payload</td>
<td><a href="#australiapayidpayload">AustraliaPayidPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;bsq_swap_account_payload</td>
<td><a href="#bsqswapaccountpayload">BsqSwapAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;capitual_account_payload</td>
<td><a href="#capitualaccountpayload">CapitualAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;cash_app_account_payload</td>
<td><a href="#cashappaccountpayload">CashAppAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;cash_by_mail_account_payload</td>
<td><a href="#cashbymailaccountpayload">CashByMailAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;cel_pay_account_payload</td>
<td><a href="#celpayaccountpayload">CelPayAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;chase_quick_pay_account_payload</td>
<td><a href="#chasequickpayaccountpayload">ChaseQuickPayAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;clear_xchange_account_payload</td>
<td><a href="#clearxchangeaccountpayload">ClearXchangeAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;country_based_payment_account_payload</td>
<td><a href="#countrybasedpaymentaccountpayload">CountryBasedPaymentAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;crypto_currency_account_payload</td>
<td><a href="#cryptocurrencyaccountpayload">CryptoCurrencyAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;faster_payments_account_payload</td>
<td><a href="#fasterpaymentsaccountpayload">FasterPaymentsAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;hal_cash_account_payload</td>
<td><a href="#halcashaccountpayload">HalCashAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;instant_crypto_currency_account_payload</td>
<td><a href="#instantcryptocurrencyaccountpayload">InstantCryptoCurrencyAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;interac_e_transfer_account_payload</td>
<td><a href="#interacetransferaccountpayload">InteracETransferAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;japan_bank_account_payload</td>
<td><a href="#japanbankaccountpayload">JapanBankAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;monese_account_payload</td>
<td><a href="#moneseaccountpayload">MoneseAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;money_beam_account_payload</td>
<td><a href="#moneybeamaccountpayload">MoneyBeamAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;money_gram_account_payload</td>
<td><a href="#moneygramaccountpayload">MoneyGramAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;o_k_pay_account_payload</td>
<td><a href="#okpayaccountpayload">OKPayAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;Paxum_account_payload</td>
<td><a href="#paxumaccountpayload">PaxumAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;Paysera_account_payload</td>
<td><a href="#payseraaccountpayload">PayseraAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;perfect_money_account_payload</td>
<td><a href="#perfectmoneyaccountpayload">PerfectMoneyAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;popmoney_account_payload</td>
<td><a href="#popmoneyaccountpayload">PopmoneyAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;prompt_pay_account_payload</td>
<td><a href="#promptpayaccountpayload">PromptPayAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;revolut_account_payload</td>
<td><a href="#revolutaccountpayload">RevolutAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;swift_account_payload</td>
<td><a href="#swiftaccountpayload">SwiftAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;swish_account_payload</td>
<td><a href="#swishaccountpayload">SwishAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;Transferwise_account_payload</td>
<td><a href="#transferwiseaccountpayload">TransferwiseAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;u_s_postal_money_order_account_payload</td>
<td><a href="#uspostalmoneyorderaccountpayload">USPostalMoneyOrderAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;uphold_account_payload</td>
<td><a href="#upholdaccountpayload">UpholdAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;venmo_account_payload</td>
<td><a href="#venmoaccountpayload">VenmoAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;verse_account_payload</td>
<td><a href="#verseaccountpayload">VerseAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;we_chat_pay_account_payload</td>
<td><a href="#wechatpayaccountpayload">WeChatPayAccountPayload</a></td>
<td></td>
</tr>
<tr>
<td>}</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr>
<td>exclude_from_json_data</td>
<td>map&#60;string, string&#62;</td>
<td>todo</td>
</tr>
</tbody></table>
<h2 id='paymentaccountpayloadinfo'>PaymentAccountPayloadInfo</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>The unique identifier of the payment account.</td>
</tr>
<tr>
<td>payment_method_id</td>
<td>string</td>
<td>The unique identifier of the payment method.</td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>The optional altcoin wallet address associated with the (altcoin) payment account.</td>
</tr>
<tr>
<td>payment_details</td>
<td>string</td>
<td>The optional payment details, if available.</td>
</tr>
</tbody></table>
<h2 id='paymentmethod'>PaymentMethod</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>max_trade_period</td>
<td>int64</td>
<td></td>
</tr>
<tr>
<td>max_trade_limit</td>
<td>int64</td>
<td></td>
</tr>
</tbody></table>
<h2 id='payseraaccountpayload'>PayseraAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='paytmaccountpayload'>PaytmAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email_or_mobile_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='perfectmoneyaccountpayload'>PerfectMoneyAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='pixaccountpayload'>PixAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pix_key</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='popmoneyaccountpayload'>PopmoneyAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='promptpayaccountpayload'>PromptPayAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>prompt_pay_id</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='revolutaccountpayload'>RevolutAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>user_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='rtgsaccountpayload'>RtgsAccountPayload</h2><h2 id='samebankaccountpayload'>SameBankAccountPayload</h2><h2 id='satispayaccountpayload'>SatispayAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mobile_nr</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='sepaaccountpayload'>SepaAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>iban</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bic</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>accepted_country_codes</td>
<td>array string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='sepainstantaccountpayload'>SepaInstantAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>iban</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bic</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>accepted_country_codes</td>
<td>array string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='specificbanksaccountpayload'>SpecificBanksAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>accepted_banks</td>
<td>array string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='strikeaccountpayload'>StrikeAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='swiftaccountpayload'>SwiftAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>beneficiary_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>beneficiary_account_nr</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>beneficiary_address</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>beneficiary_city</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>beneficiary_phone</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>special_instructions</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_swift_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_country_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_branch</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>bank_address</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>intermediary_swift_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>intermediary_country_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>intermediary_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>intermediary_branch</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>intermediary_address</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='swishaccountpayload'>SwishAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mobile_nr</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='tikkieaccountpayload'>TikkieAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>iban</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='tradecurrency'>TradeCurrency</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>one of {</td>
<td>&nbsp;</td>
<td>Field value will be one of the following.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;crypto_currency</td>
<td><a href="#cryptocurrency">CryptoCurrency</a></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;fiat_currency</td>
<td><a href="#fiatcurrency">FiatCurrency</a></td>
<td></td>
</tr>
<tr>
<td>}</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody></table>
<h2 id='tradeinfo'>TradeInfo</h2>
<p>TODO Modify bisq-grpc-api-doc to include core Trade enums in API Reference.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer</td>
<td><a href="#offerinfo">OfferInfo</a></td>
<td>The original offer.</td>
</tr>
<tr>
<td>trade_id</td>
<td>string</td>
<td>The unique identifier of the trade.</td>
</tr>
<tr>
<td>short_id</td>
<td>string</td>
<td>An abbreviation of unique identifier of the trade.  It cannot be used as parameter to rpc methods GetTrade,<br/>ConfirmPaymentStarted, CloseTrade, etc., but it may be useful while interacting with support or trading peers.<br/></td>
</tr>
<tr>
<td>date</td>
<td>uint64</td>
<td>The creation date of the trade as a long: the number of milliseconds that have elapsed since January 1, 1970.</td>
</tr>
<tr>
<td>role</td>
<td>string</td>
<td>A brief description of the user&#39;s role in the trade, i.e., an offer maker or taker, a BTC buyer or seller.</td>
</tr>
<tr>
<td>is_currency_for_taker_fee_btc</td>
<td>bool</td>
<td>Whether the offer taker&#39;s Bisq trade fee was paid in BTC or not (BSQ).</td>
</tr>
<tr>
<td>tx_fee_as_long</td>
<td>uint64</td>
<td>The bitcoin miner transaction fee in satoshis.</td>
</tr>
<tr>
<td>taker_fee_as_long</td>
<td>uint64</td>
<td>The offer taker&#39;s Bisq trade fee in satoshis.</td>
</tr>
<tr>
<td>taker_fee_tx_id</td>
<td>string</td>
<td>The bitcoin transaction id for offer taker&#39;s Bisq trade fee.</td>
</tr>
<tr>
<td>deposit_tx_id</td>
<td>string</td>
<td>The bitcoin transaction id for the offer taker&#39;s security deposit.</td>
</tr>
<tr>
<td>payout_tx_id</td>
<td>string</td>
<td>The bitcoin transaction id for trade payout.</td>
</tr>
<tr>
<td>trade_amount_as_long</td>
<td>uint64</td>
<td>The trade payout amount in satoshis.</td>
</tr>
<tr>
<td>trade_price</td>
<td>string</td>
<td>For fiat trades:  the fiat price for 1 BTC to 4 decimal places, e.g., 41000.50 EUR is &quot;41000.5000&quot;.<br/>For altcoin trades:  the altcoin price for 1 BTC to 8 decimal places, e.g., 0.5 BTC is &quot;0.50000000&quot;.<br/></td>
</tr>
<tr>
<td>trading_peer_node_address</td>
<td>string</td>
<td>The trading peer&#39;s node address.</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The internal state of the trade. (TODO bisq-grpc-api-doc -&gt; include Trade.State in API Reference.)</td>
</tr>
<tr>
<td>phase</td>
<td>string</td>
<td>The internal phase of the trade. (TODO bisq-grpc-api-doc -&gt; include Trade.Phase in API Reference.)</td>
</tr>
<tr>
<td>trade_period_state</td>
<td>string</td>
<td>How much of the trade protocol&#39;s time limit has elapsed. (TODO bisq-grpc-api-doc -&gt; include Trade.TradePeriodState in API Reference.)</td>
</tr>
<tr>
<td>is_deposit_published</td>
<td>bool</td>
<td>Whether the trade&#39;s security deposit bitcoin transaction has been broadcast, or not.</td>
</tr>
<tr>
<td>is_deposit_confirmed</td>
<td>bool</td>
<td>Whether the trade&#39;s security deposit bitcoin transaction has been confirmed at least once, or not.</td>
</tr>
<tr>
<td>is_payment_started_message_sent</td>
<td>bool</td>
<td>Whether the trade&#39;s &#39;start payment&#39; message has been sent by the BTC buyer, or not.</td>
</tr>
<tr>
<td>is_payment_received_message_sent</td>
<td>bool</td>
<td>Whether the trade&#39;s &#39;payment received&#39; message has been sent by the BTC seller, or not.</td>
</tr>
<tr>
<td>is_payout_published</td>
<td>bool</td>
<td>Whether the trade&#39;s payout bitcoin transaction has been confirmed at least once, or not.</td>
</tr>
<tr>
<td>is_completed</td>
<td>bool</td>
<td>Whether the trade&#39;s payout has been completed and the trade is now closed, or not.</td>
</tr>
<tr>
<td>contract_as_json</td>
<td>string</td>
<td>The entire trade contract as a json string.</td>
</tr>
<tr>
<td>contract</td>
<td><a href="#contractinfo">ContractInfo</a></td>
<td>The summary of the trade contract.</td>
</tr>
<tr>
<td>trade_volume</td>
<td>string</td>
<td>The volume of currency traded for BTC.</td>
</tr>
<tr>
<td>bsq_swap_trade_info</td>
<td><a href="#bsqswaptradeinfo">BsqSwapTradeInfo</a></td>
<td>The details specific to the BSQ swap trade.  If the trade is not a BSQ swap, this field should be ignored.</td>
</tr>
<tr>
<td>closing_status</td>
<td>string</td>
<td>Needed by open/closed/failed trade list items.</td>
</tr>
</tbody></table>
<h2 id='transferwiseaccountpayload'>TransferwiseAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='transferwiseusdaccountpayload'>TransferwiseUsdAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>beneficiary_address</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='txfeerateinfo'>TxFeeRateInfo</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>use_custom_tx_fee_rate</td>
<td>bool</td>
<td>Whether the daemon&#39;s custom btc transaction fee rate preference is set, or not.</td>
</tr>
<tr>
<td>custom_tx_fee_rate</td>
<td>uint64</td>
<td>The daemon&#39;s custom btc transaction fee rate preference, in sats/byte.</td>
</tr>
<tr>
<td>fee_service_rate</td>
<td>uint64</td>
<td>The Bisq network&#39;s most recently available btc transaction fee rate, in sats/byte.</td>
</tr>
<tr>
<td>last_fee_service_request_ts</td>
<td>uint64</td>
<td>The date of the most recent Bisq network fee rate request as a long: the number of milliseconds that have elapsed since January 1, 1970.</td>
</tr>
<tr>
<td>min_fee_service_rate</td>
<td>uint64</td>
<td>The Bisq network&#39;s minimum btc transaction fee rate, in sats/byte.</td>
</tr>
</tbody></table>
<h2 id='txinfo'>TxInfo</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tx_id</td>
<td>string</td>
<td>The bitcoin transaction id.</td>
</tr>
<tr>
<td>input_sum</td>
<td>uint64</td>
<td>The sum of the bitcoin transaction&#39;s input values in satoshis.</td>
</tr>
<tr>
<td>output_sum</td>
<td>uint64</td>
<td>The sum of the bitcoin transaction&#39;s output values in satoshis.</td>
</tr>
<tr>
<td>fee</td>
<td>uint64</td>
<td>The bitcoin transaction&#39;s miner fee in satoshis.</td>
</tr>
<tr>
<td>size</td>
<td>int32</td>
<td>The bitcoin transaction&#39;s size in bytes.</td>
</tr>
<tr>
<td>is_pending</td>
<td>bool</td>
<td>Whether the bitcoin transaction has been confirmed at least one time, or not.</td>
</tr>
<tr>
<td>memo</td>
<td>string</td>
<td>An optional memo associated with the bitcoin transaction.</td>
</tr>
</tbody></table>
<h2 id='uspostalmoneyorderaccountpayload'>USPostalMoneyOrderAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>postal_address</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='upholdaccountpayload'>UpholdAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>account_owner</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='upiaccountpayload'>UpiAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>virtual_payment_address</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='venmoaccountpayload'>VenmoAccountPayload</h2>
<p>Deprecated, not used.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>venmo_user_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='verseaccountpayload'>VerseAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='wechatpayaccountpayload'>WeChatPayAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_nr</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='westernunionaccountpayload'>WesternUnionAccountPayload</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>holder_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h1 id='grpc-enums'>gRPC Enums</h1><h2 id='availabilityresult'>AvailabilityResult</h2>
<table><thead>
<tr>
<th>Constant</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PB_ERROR</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>UNKNOWN_FAILURE</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>AVAILABLE</td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>OFFER_TAKEN</td>
<td>3</td>
<td></td>
</tr>
<tr>
<td>PRICE_OUT_OF_TOLERANCE</td>
<td>4</td>
<td></td>
</tr>
<tr>
<td>MARKET_PRICE_NOT_AVAILABLE</td>
<td>5</td>
<td></td>
</tr>
<tr>
<td>NO_ARBITRATORS</td>
<td>6</td>
<td></td>
</tr>
<tr>
<td>NO_MEDIATORS</td>
<td>7</td>
<td></td>
</tr>
<tr>
<td>USER_IGNORED</td>
<td>8</td>
<td></td>
</tr>
<tr>
<td>MISSING_MANDATORY_CAPABILITY</td>
<td>9</td>
<td></td>
</tr>
<tr>
<td>NO_REFUND_AGENTS</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>UNCONF_TX_LIMIT_HIT</td>
<td>11</td>
<td></td>
</tr>
<tr>
<td>MAKER_DENIED_API_USER</td>
<td>12</td>
<td></td>
</tr>
<tr>
<td>PRICE_CHECK_FAILED</td>
<td>13</td>
<td></td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>Errors sent from the Java-based gRPC daemon to gRPC clients are instances
of <a href="https://github.com/grpc/grpc-java/blob/master/api/src/main/java/io/grpc/StatusRuntimeException.java">StatusRuntimeException</a>
. For non-Java gRPC clients, the equivelant gRPC error type is sent. Exceptions sent to gRPC clients contain
a <a href="https://github.com/grpc/grpc-java/blob/master/api/src/main/java/io/grpc/Status.java">Status.Code</a> to aid client-side
error handling. The Bisq API daemon does not use all sixteen of the gRPC status codes, below are the currently used
status codes.</p>

<table><thead>
<tr>
<th>Code</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>UNKNOWN</td>
<td>2</td>
<td>An unexpected error occurred in the daemon, and it was not mapped to a meaningful status code.</td>
</tr>
<tr>
<td>INVALID_ARGUMENT</td>
<td>3</td>
<td>An invalid parameter value was sent to the daemon.</td>
</tr>
<tr>
<td>NOT_FOUND</td>
<td>5</td>
<td>A requested entity was not found.</td>
</tr>
<tr>
<td>ALREADY_EXISTS</td>
<td>6</td>
<td>An attempt to change some value or state in the daemon failed because the value or state already exists.</td>
</tr>
<tr>
<td>FAILED_PRECONDITION</td>
<td>9</td>
<td>An attempted operation failed because some pre-condition was not met.</td>
</tr>
<tr>
<td>UNIMPLEMENTED</td>
<td>12</td>
<td>An attempt was made to perform an unsupported operation.</td>
</tr>
<tr>
<td>UNAVAILABLE</td>
<td>14</td>
<td>Some resource is not available at the time requested.</td>
</tr>
<tr>
<td>UNAUTHENTICATED</td>
<td>16</td>
<td>The gRPC client did not correctly authenticate to the daemon.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">CLI</a>
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="python">Python</a>
          </div>
      </div>
    </div>
  </body>
</html>
